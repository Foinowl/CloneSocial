(this.webpackJsonpfront=this.webpackJsonpfront||[]).push([[0],{118:function(e,t,c){},147:function(e,t){},152:function(e,t,c){},153:function(e,t,c){},154:function(e,t,c){},157:function(e,t,c){},158:function(e,t,c){},159:function(e,t,c){},160:function(e,t,c){},161:function(e,t,c){},162:function(e,t,c){},163:function(e,t,c){"use strict";c.r(t);var n=c(1),a=c.n(n),r=c(38),s=c.n(r),i=(c(88),c(89),c(4)),o=c(5),u=c(10),l=(c(95),c(0)),d=function(e){var t=e.cls,c=void 0===t?"":t;return Object(l.jsx)("svg",{focusable:"false",viewBox:"0 0 24 24","aria-hidden":"true",className:"svg-el ".concat(c),children:Object(l.jsx)("path",{d:"M22.46 6c-.77.35-1.6.58-2.46.69.88-.53 1.56-1.37 1.88-2.38-.83.5-1.75.85-2.72 1.05C18.37 4.5 17.26 4 16 4c-2.35 0-4.27 1.92-4.27 4.29 0 .34.04.67.11.98C8.28 9.09 5.11 7.38 3 4.79c-.37.63-.58 1.37-.58 2.15 0 1.49.75 2.81 1.91 3.56-.71 0-1.37-.2-1.95-.5v.03c0 2.08 1.48 3.82 3.44 4.21a4.22 4.22 0 0 1-1.93.07 4.28 4.28 0 0 0 4 2.98 8.521 8.521 0 0 1-5.33 1.84c-.34 0-.68-.02-1.02-.06C3.44 20.29 5.7 21 8.12 21 16 21 20.33 14.46 20.33 8.79c0-.19 0-.37-.01-.56.84-.6 1.56-1.36 2.14-2.23z"})})},j=(c(97),function(e){var t=e.text,c=e.type,n=e.onClick,r=e.cls,s=e.disabled,i=void 0!==s&&s,o=a.a.useRef(),u=a.a.useRef();return Object(l.jsxs)("button",{onClick:n,onMouseDown:function(e){e.preventDefault();var t=o.current.getBoundingClientRect(),c=e,n=c.pageX-t.x,a=c.pageY-t.y;u.current.style.top=a+"px",u.current.style.left=n+"px"},type:"button",disabled:i,className:"rootButton".concat(" ","primary"===c?"inLinedPrimary":"outlinedPrimary"," ").concat(r),ref:o,children:[t,Object(l.jsx)("span",{ref:u})]})}),h=c(3),b=c(21),f=(c(98),function(e){var t=e.active,c=e.setActive,n=e.auth,a=e.children,r=!!n;return Object(l.jsx)("div",{className:t?"modal active":"modal",onClick:function(){return c(!1)},children:Object(l.jsxs)("div",{className:t?"modal__content active":"modal__content",onClick:function(e){return e.stopPropagation()},children:[Object(l.jsx)("div",{className:"modal__content-top",children:Object(l.jsx)("div",{className:"container-close",onClick:function(){return c(!1)},children:Object(l.jsx)("svg",{viewBox:"0 0 24 24","aria-hidden":"true",className:"container-close__svg",children:Object(l.jsx)("path",{d:"M13.414 12l5.793-5.793c.39-.39.39-1.023 0-1.414s-1.023-.39-1.414 0L12 10.586 6.207 4.793c-.39-.39-1.023-.39-1.414 0s-.39 1.023 0 1.414L10.586 12l-5.793 5.793c-.39.39-.39 1.023 0 1.414.195.195.45.293.707.293s.512-.098.707-.293L12 13.414l5.793 5.793c.195.195.45.293.707.293s.512-.098.707-.293c.39-.39.39-1.023 0-1.414L13.414 12z"})})})}),Object(l.jsx)("div",{className:"modal__content-bottom",children:r?a:Object(l.jsx)(l.Fragment,{children:a})})]})})});c(99);var O=function(e){var t=e.type||"text",c="".concat(t,"-").concat(Math.random()),a=Object(n.useRef)(),r=Object(n.useRef)();return Object(n.useEffect)((function(){var t=setTimeout((function(){(function(e){var t=e.valid,c=e.touched,n=e.shouldValidate;return!t&&n&&c})(e)&&(a.current.classList.add("input__block--error"),r.current.innerHTML=e.errorMessage||"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u043e\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435")}),350);return a.current.classList.remove("input__block--error"),r.current.innerHTML="",function(){clearTimeout(t)}}),[e.value]),Object(l.jsxs)("div",{className:"input__block",ref:a,children:[Object(l.jsx)("input",{name:e.name,type:t,id:c,value:e.value,onChange:e.onChange,required:!0,tabIndex:"0"}),Object(l.jsx)("label",{htmlFor:"",children:e.label}),Object(l.jsx)("span",{ref:r})]})},m=["\u042f\u043d\u0432\u0430\u0440\u044c","\u0424\u0435\u0432\u0440\u0430\u043b\u044c","\u041c\u0430\u0440\u0442","\u0410\u043f\u0440\u0435\u043b\u044c","\u041c\u0430\u0439","\u0418\u044e\u043d\u044c","\u0418\u044e\u043b\u044c","\u0410\u0432\u0433\u0443\u0441\u0442","\u0421\u0435\u043d\u0442\u044f\u0431\u0440\u044c","\u041e\u043a\u0442\u044f\u0431\u0440\u044c","\u041d\u043e\u044f\u0431\u0440\u044c","\u0414\u0435\u043a\u0430\u0431\u0440\u044c"],v=function(e){var t=e.cls,c=(e.setValue,e.value),n=e.onChange;return Object(l.jsxs)("select",{value:c,className:t,onChange:function(e){n&&n(e.target.value)},children:[Object(l.jsx)("option",{value:"",disabled:!0,hidden:!0}),m.map((function(e,t){return Object(l.jsx)("option",{value:"".concat(t+1),children:e},"".concat(e,"-").concat(t))}))]})};function p(e,t){for(var c=[],n=e;n<t;n++)c.push(n);return c}var g=function(e){var t=e.start,c=e.end,n=e.cls,a=e.value,r=p(t,c+1);return Object(l.jsxs)("select",{value:a,className:n,onChange:function(t){e.onChange&&e.onChange(t.target.value)},children:[Object(l.jsx)("option",{disabled:!0,value:"",hidden:!0}),r.map((function(e,t){return Object(l.jsx)("option",{value:e,children:e},e)}))]})},x=function(e){var t=e.cls,c=(e.setValue,e.y),n=e.m,a=e.value,r=e.onChange,s=Number(c),i=Number(n),o=new Date(s,i,0).getDate(),u=a>o?"":a;return Object(l.jsxs)("select",{value:u,className:t,onChange:function(e){r&&r(e.target.value)},children:[Object(l.jsx)("option",{value:"",disabled:!0,hidden:!0}),p(1,o+1).map((function(e,t){return Object(l.jsx)("option",{value:"".concat(t+1),children:e},"".concat(e,"-").concat(t))}))]})},y=c(75),N=c.n(y),_=c(22),C=c(76),w=c(41),k=c(77),S=c.n(k),E="LOGIN",I="REGISTER",M="LOGOUT",U="UPDATE_PROFILE",L={user:{},token:"",isLoggedIn:!1},T=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L,t=arguments.length>1?arguments[1]:void 0,c=t.type,n=t.payload;switch(c){case E:case I:return Object(h.a)(Object(h.a)({},e),{},{user:n.user,token:n.token,isLoggedIn:!0});case M:return Object(h.a)(Object(h.a)({},e),{},{user:{},token:"",isLoggedIn:!1});case U:return Object(h.a)(Object(h.a)({},e),{},{user:n});default:return e}},R=c(24),A={fetchChats:function(){return ue.get("/chats").then((function(e){return e.data})).catch((function(e){throw e}))},uploadImage:function(e){return ue.post("/chats/upload-image",e,{headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then((function(e){return e.data.url})).catch((function(e){throw e}))},paginateMessages:function(e,t){return ue.get("/chats/messages",{params:{id:e,page:t}}).then((function(e){return e.data})).catch((function(e){throw e}))},searchUsers:function(e){return ue.get("/users/search-users",{params:{term:e}}).then((function(e){return e.data})).catch((function(e){throw e}))},createChat:function(e){return ue.post("/chats/create",{partnerId:e}).then((function(e){return e.data})).catch((function(e){throw e}))},addFriendToGroupChat:function(e,t){return ue.post("/chats/add-user-to-group",{userId:e,chatId:t}).then((function(e){return e.data})).catch((function(e){throw e}))},leaveCurrentChat:function(e){return ue.post("/chats/leave-current-chat",{chatId:e}).then((function(e){return e.data})).catch((function(e){throw e}))},deleteCurrentChat:function(e){return ue.delete("/chats/".concat(e)).then((function(e){return e.data})).catch((function(e){throw e}))}},F="FETCH_CHATS",D="SET_CURRENT_CHAT",q="FRIENDS_ONLINE",B="FRIEND_ONLINE",H="FRIEND_OFFLINE",z="SET_SOCKET",P="RECEIVED_MESSAGE",V="SENDER_TYPING",G="PAGINATE_MESSAGES",W="INCREMENT_SCROLL",J="CREATE_CHAT",Y="ADD_USER_TO_GROUP",Z="LEAVE_CURRENT_CHAT",K="DELETE_CURRENT_CHAT",X=function(){return function(e){e({type:W})}},$={chats:[],currentChat:{},socket:{},newMessage:{chatId:null,seen:null},scrollBottom:0,senderTyping:{typing:!1}},Q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$,t=arguments.length>1?arguments[1]:void 0,c=t.type,n=t.payload;switch(c){case F:return console.log(n),Object(h.a)(Object(h.a)({},e),{},{chats:n});case D:return Object(h.a)(Object(h.a)({},e),{},{currentChat:n,scrollBottom:e.scrollBottom+1,newMessage:{chatId:null,seen:null}});case q:var a=e.chats.map((function(e){return Object(h.a)(Object(h.a)({},e),{},{Users:e.Users.map((function(e){return n.includes(e.id)?Object(h.a)(Object(h.a)({},e),{},{status:"online"}):e}))})}));return Object(h.a)(Object(h.a)({},e),{},{chats:a});case B:var r=Object(h.a)({},e.currentChat),s=e.chats.map((function(e){var t=e.Users.map((function(e){return e.id===parseInt(n.id)?Object(h.a)(Object(h.a)({},e),{},{status:"online"}):e}));return e.id===r.id&&(r=Object(h.a)(Object(h.a)({},r),{},{Users:t})),Object(h.a)(Object(h.a)({},e),{},{Users:t})}));return Object(h.a)(Object(h.a)({},e),{},{chats:s,currentChat:r});case H:var i=Object(h.a)({},e.currentChat),o=e.chats.map((function(e){var t=e.Users.map((function(e){return e.id===parseInt(n.id)?Object(h.a)(Object(h.a)({},e),{},{status:"offline"}):e}));return e.id===i.id&&(i=Object(h.a)(Object(h.a)({},i),{},{Users:t})),Object(h.a)(Object(h.a)({},e),{},{Users:t})}));return Object(h.a)(Object(h.a)({},e),{},{chats:o,currentChat:i});case z:return Object(h.a)(Object(h.a)({},e),{},{socket:n});case P:var u=n.userId,l=n.message,d=Object(h.a)({},e.currentChat),j=Object(h.a)({},e.newMessage),b=e.scrollBottom,f=e.chats.map((function(e){return l.chatId===e.id?(l.User.id===u?b++:j={chatId:e.id,seen:!1},l.chatId===d.id&&(d=Object(h.a)(Object(h.a)({},d),{},{Messages:[].concat(Object(R.a)(d.Messages),[l])})),Object(h.a)(Object(h.a)({},e),{},{Messages:[].concat(Object(R.a)(e.Messages),[l])})):e}));return b===e.scrollBottom?Object(h.a)(Object(h.a)({},e),{},{chats:f,currentChat:d,newMessage:j,senderTyping:{typing:!1}}):Object(h.a)(Object(h.a)({},e),{},{chats:f,currentChat:d,newMessage:j,scrollBottom:b,senderTyping:{typing:!1}});case V:return n.typing?Object(h.a)(Object(h.a)({},e),{},{senderTyping:n,scrollBottom:e.scrollBottom+1}):Object(h.a)(Object(h.a)({},e),{},{senderTyping:n});case G:var O=n.messages,m=n.id,v=n.pagination,p=Object(h.a)({},e.currentChat),g=e.chats.map((function(e){if(e.id===m){var t=[].concat(Object(R.a)(O),Object(R.a)(e.Messages));return p=Object(h.a)(Object(h.a)({},p),{},{Messages:t,Pagination:v}),Object(h.a)(Object(h.a)({},e),{},{Messages:t,Pagination:v})}return e}));return Object(h.a)(Object(h.a)({},e),{},{chats:g,currentChat:p});case W:return Object(h.a)(Object(h.a)({},e),{},{scrollBottom:e.scrollBottom+1,newMessage:{chatId:null,seen:!0}});case J:return Object(h.a)(Object(h.a)({},e),{},{chats:[].concat(Object(R.a)(e.chats),[n])});case Y:var x=n.chat,y=n.chatters,N=!1,_=e.chats.map((function(e){return x.id===e.id?(N=!0,Object(h.a)(Object(h.a)({},e),{},{Users:[].concat(Object(R.a)(e.Users),Object(R.a)(y))})):e}));N||_.push(x);var C=Object(h.a)({},e.currentChat);return Object.keys(C).length>0&&x.id===C.id&&(C=Object(h.a)(Object(h.a)({},e.currentChat),{},{Users:[].concat(Object(R.a)(e.currentChat.Users),Object(R.a)(y))})),Object(h.a)(Object(h.a)({},e),{},{chats:_,currentChat:C});case Z:var w=n.chatId,k=n.userId,S=n.currentUserId;if(k===S){var E=e.chats.filter((function(e){return e.id!==w}));return Object(h.a)(Object(h.a)({},e),{},{chats:E,currentChat:e.currentChat.id===w?{}:e.currentChat})}var I=e.chats.map((function(e){return w===e.id?Object(h.a)(Object(h.a)({},e),{},{Users:e.Users.filter((function(e){return e.id!==k}))}):e})),M=Object(h.a)({},e.currentChat);return M.id===w&&(M=Object(h.a)(Object(h.a)({},M),{},{Users:M.Users.filter((function(e){return e.id!==k}))})),Object(h.a)(Object(h.a)({},e),{},{chats:I,currentChat:M});case K:return Object(h.a)(Object(h.a)({},e),{},{chats:e.chats.filter((function(e){return e.id!==n})),currentChat:e.currentChat.id===n?{}:e.currentChat});default:return e}},ee={key:"user",storage:S.a,whitelist:["auth"]},te=Object(_.b)({auth:T,chatReducer:Q}),ce=Object(w.a)(ee,te),ne=(0,_.c)(Object(_.a)(C.a)),ae=Object(_.d)(ce,ne),re=Object(w.b)(ae),se=JSON.parse(localStorage.getItem("persist:user")),ie=se?JSON.parse(se.auth):"",oe=N.a.create({baseURL:"http://127.0.0.1:3005",headers:{Accept:"application/json",Authorization:"Bearer ".concat(ie.token||"")}});oe.interceptors.response.use((function(e){return e}),(function(e){if(401!==e.response.status)throw e;if("undefined"!==typeof e.response.data.error.name&&"TokenExpiredError"===e.response.data.error.name)throw ae.dispatch(de()),e}));var ue=oe,le={login:function(e){return ue.post("/login",e).then((function(e){return e.data})).catch((function(e){throw console.log("Auth service err",e),e}))},register:function(e){return ue.post("/register",e).then((function(e){return e.data})).catch((function(e){throw console.log("Auth service err",e),e}))},logout:function(){ue.defaults.headers.Authorization="",localStorage.removeItem("user")},updateProfile:function(e){return ue.post("/users/update",e,{headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then((function(e){var t=e.data;return localStorage.setItem("user",JSON.stringify(t)),t})).catch((function(e){throw console.log("Auth service err",e),e}))}},de=function(){return function(e){le.logout(),e({type:M})}},je=c(78),he=c(79),be=/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,6}$/,fe=function(){function e(){Object(je.a)(this,e)}return Object(he.a)(e,null,[{key:"required",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e&&e.trim()}},{key:"minLength",value:function(e){return function(t){return t.length>=e}}},{key:"emailRequired",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return new RegExp(be).test(e)}}]),e}(),Oe=(c(61),function(e){var t=e.active,c=e.setActive,a=e.history,r=Object(o.b)(),s=Object(n.useState)(""),u=Object(i.a)(s,2),d=u[0],m=u[1],p=Object(n.useState)(""),y=Object(i.a)(p,2),N=y[0],_=y[1],C=Object(n.useState)(""),w=Object(i.a)(C,2),k=w[0],S=w[1],E=Object(n.useState)(!1),M=Object(i.a)(E,2),U=M[0],L=M[1],T=Object(n.useState)(!1),R=Object(i.a)(T,2),A=R[0],F=R[1],D=Object(n.useState)({firstName:{value:"",type:"text",errorMessage:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0438\u043c\u044f",label:"\u0418\u043c\u044f",valid:!1,touched:!1,validation:{required:fe.required,minLength:fe.minLength(1)}},lastName:{value:"",type:"text",errorMessage:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0444\u0430\u043c\u0438\u043b\u0438\u044e",label:"\u0424\u0430\u043c\u0438\u043b\u0438\u044f",valid:!1,touched:!1,validation:{required:fe.required,minLength:fe.minLength(1)}},email:{value:"",type:"text",errorMessage:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u044b\u0439 email",label:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u043e\u0447\u0442\u0443",valid:!1,touched:!1,validation:{required:fe.required,email:fe.emailRequired}},password:{value:"",type:"password",label:"\u041f\u0430\u0440\u043e\u043b\u044c",errorMessage:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c",valid:!1,touched:!1,validation:{required:fe.required,minLength:fe.minLength(4)}}}),q=Object(i.a)(D,2),B=q[0],H=q[1];Object(n.useEffect)((function(){F(k&&d&&N)}),[k,d,N]);var z=function(e){var t=e.target,c=t.name,n=t.value,a=Object(h.a)({},B[c]);a.value=n,a.touched=!0,a.valid=function(e,t){if(!t)return!0;var c=!0;return Object.keys(t).forEach((function(n){var a=t[n];c=a(e)})),c}(n,a.validation);var r=!0;Object.keys(B).forEach((function(e){r=B[e].valid&&r})),L(r),H((function(e){return Object(h.a)(Object(h.a)({},e),{},Object(b.a)({},c,a))}))};return Object(l.jsx)(f,{active:t,setActive:c,auth:!0,children:Object(l.jsx)("div",{className:"auth",children:Object(l.jsxs)("div",{className:"auth__box",children:[Object(l.jsx)("div",{className:"auth__box-create",children:Object(l.jsx)("span",{children:"\u0421\u043e\u0437\u0434\u0430\u0439\u0442\u0435 \u0443\u0447\u0435\u0442\u043d\u0443\u044e \u0437\u0430\u043f\u0438\u0441\u044c"})}),Object(l.jsxs)("form",{className:"auth__form",children:[Object.keys(B).map((function(e,t){var c=B[e];return Object(l.jsx)(O,{type:c.type,value:c.value,name:e,valid:c.valid,touched:c.touched,label:c.label,shouldValidate:!!c.validation,errorMessage:c.errorMessage,onChange:z},e+t)})),Object(l.jsxs)("div",{className:"auth__select",children:[Object(l.jsxs)("div",{className:"auth__item",children:[Object(l.jsx)("span",{children:"\u041c\u0435\u0441\u044f\u0446"}),Object(l.jsx)(v,{className:"months",value:k,onChange:function(e){S(e)}}),Object(l.jsx)("label",{})]}),Object(l.jsxs)("div",{className:"auth__item",children:[Object(l.jsx)("span",{children:"\u0414\u0435\u043d\u044c"}),Object(l.jsx)(x,{className:"days",y:N,m:k,value:d,onChange:function(e){m(e)}}),Object(l.jsx)("label",{})]}),Object(l.jsxs)("div",{className:"auth__item",children:[Object(l.jsx)(g,{className:"years",value:N,start:(new Date).getFullYear()-125,end:(new Date).getFullYear(),onChange:function(e){_(e)}}),Object(l.jsx)("span",{children:"\u0413\u043e\u0434"}),Object(l.jsx)("label",{})]})]}),Object(l.jsx)(j,{text:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f",type:"primary",cls:"fullWidth",onClick:function(e){e.preventDefault();var t=new Date(N,k-1,d),c=Object.keys(B).map((function(e){var t=B[e].value;return Object(b.a)({},e,t)})).reduce((function(e,t){return Object(h.a)(Object(h.a)({},e),t)}),{});r(function(e,t){return function(c){return console.log(e),le.register(e).then((function(e){c({type:I,payload:e}),t.push("/")})).catch((function(e){}))}}(Object(h.a)(Object(h.a)({},c),{},{dateBirth:t}),a))},disabled:!U||!A})]})]})})})}),me=function(e){var t=e.active,c=e.setActive,a=e.history,r=Object(o.b)(),s=Object(n.useState)(!1),u=Object(i.a)(s,2),d=u[0],m=u[1],v=Object(n.useState)({email:{value:"",type:"text",errorMessage:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u044b\u0439 email",label:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u043e\u0447\u0442\u0443",valid:!1,touched:!1,validation:{required:fe.required,email:fe.emailRequired}},password:{value:"",type:"password",label:"\u041f\u0430\u0440\u043e\u043b\u044c",errorMessage:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c",valid:!1,touched:!1,validation:{required:fe.required,minLength:fe.minLength(4)}}}),p=Object(i.a)(v,2),g=p[0],x=p[1],y=function(e){var t=e.target,c=t.name,n=t.value,a=Object(h.a)({},g[c]);a.value=n,a.touched=!0,a.valid=function(e,t){if(!t)return!0;var c=!0;return Object.keys(t).forEach((function(n){var a=t[n];c=a(e)})),c}(n,a.validation);var r=!0;Object.keys(g).forEach((function(e){r=g[e].valid&&r})),m(r),x((function(e){return Object(h.a)(Object(h.a)({},e),{},Object(b.a)({},c,a))}))};return Object(l.jsx)(f,{active:t,setActive:c,auth:!0,children:Object(l.jsx)("div",{className:"auth",children:Object(l.jsxs)("div",{className:"auth__box",children:[Object(l.jsx)("div",{className:"auth__box-create",children:Object(l.jsx)("span",{children:"\u0412\u043e\u0439\u0434\u0438\u0442\u0435 \u0432 \u0443\u0447\u0435\u0442\u043d\u0443\u044e \u0437\u0430\u043f\u0438\u0441\u044c"})}),Object(l.jsxs)("form",{className:"auth__form",children:[Object.keys(g).map((function(e,t){var c=g[e];return Object(l.jsx)(O,{type:c.type,value:c.value,name:e,valid:c.valid,touched:c.touched,label:c.label,shouldValidate:!!c.validation,errorMessage:c.errorMessage,onChange:y},e+t)})),Object(l.jsx)(j,{text:"\u0412\u043e\u0439\u0442\u0438",type:"primary",cls:"fullWidth",onClick:function(e){e.preventDefault();var t=Object.keys(g).map((function(e){var t=g[e].value;return Object(b.a)({},e,t)})).reduce((function(e,t){return Object(h.a)(Object(h.a)({},e),t)}),{});r(function(e,t){return function(c){return console.log(e),le.login(e).then((function(e){c({type:E,payload:e}),t.push("/")})).catch((function(e){}))}}(Object(h.a)({},t),a))},disabled:!d})]})]})})})},ve=(c(118),function(e){var t=e.history,c=Object(o.c)((function(e){return e.auth.isLoggedIn})),a=Object(n.useState)(!1),r=Object(i.a)(a,2),s=r[0],h=r[1],b=Object(n.useState)(!1),f=Object(i.a)(b,2),O=f[0],m=f[1];return Object(n.useEffect)((function(){c&&u.a}),[t,c]),Object(l.jsxs)("div",{className:"auth-container",children:[Object(l.jsxs)("div",{className:"auth-container__left",children:[Object(l.jsx)(d,{cls:"logo logo--big"}),Object(l.jsxs)("ul",{className:"auth-container__left-about",children:[Object(l.jsx)("li",{className:"auth-container__left-item",children:Object(l.jsxs)("h6",{className:"auth-container__left-title",children:[Object(l.jsx)("svg",{class:"svg-el auth-container__left-title-el",focusable:"false",viewBox:"0 0 24 24","aria-hidden":"true",children:Object(l.jsx)("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"})}),"\u0427\u0438\u0442\u0430\u0439\u0442\u0435 \u043e \u0442\u043e\u043c, \u0447\u0442\u043e \u0432\u0430\u043c \u0438\u043d\u0442\u0435\u0440\u0435\u0441\u043d\u043e."]})}),Object(l.jsx)("li",{className:"auth-container__left-item",children:Object(l.jsxs)("h6",{className:"auth-container__left-title",children:[Object(l.jsx)("svg",{class:"svg-el auth-container__left-title-el",focusable:"false",viewBox:"0 0 24 24","aria-hidden":"true",children:Object(l.jsx)("path",{d:"M16.5 13c-1.2 0-3.07.34-4.5 1-1.43-.67-3.3-1-4.5-1C5.33 13 1 14.08 1 16.25V19h22v-2.75c0-2.17-4.33-3.25-6.5-3.25zm-4 4.5h-10v-1.25c0-.54 2.56-1.75 5-1.75s5 1.21 5 1.75v1.25zm9 0H14v-1.25c0-.46-.2-.86-.52-1.22.88-.3 1.96-.53 3.02-.53 2.44 0 5 1.21 5 1.75v1.25zM7.5 12c1.93 0 3.5-1.57 3.5-3.5S9.43 5 7.5 5 4 6.57 4 8.5 5.57 12 7.5 12zm0-5.5c1.1 0 2 .9 2 2s-.9 2-2 2-2-.9-2-2 .9-2 2-2zm9 5.5c1.93 0 3.5-1.57 3.5-3.5S18.43 5 16.5 5 13 6.57 13 8.5s1.57 3.5 3.5 3.5zm0-5.5c1.1 0 2 .9 2 2s-.9 2-2 2-2-.9-2-2 .9-2 2-2z"})}),"\u0423\u0437\u043d\u0430\u0439\u0442\u0435, \u043e \u0447\u0435\u043c \u0433\u043e\u0432\u043e\u0440\u044f\u0442 \u0432 \u043c\u0438\u0440\u0435."]})}),Object(l.jsx)("li",{className:"auth-container__left-item",children:Object(l.jsxs)("h6",{className:"auth-container__left-title",children:[Object(l.jsx)("svg",{class:"svg-el auth-container__left-title-el",focusable:"false",viewBox:"0 0 24 24","aria-hidden":"true",children:Object(l.jsx)("path",{d:"M20 17.17L18.83 16H4V4h16v13.17zM20 2H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h14l4 4V4c0-1.1-.9-2-2-2z"})}),"\u041f\u0440\u0438\u0441\u043e\u0435\u0434\u0438\u043d\u044f\u0439\u0442\u0435\u0441\u044c \u043a \u043e\u0431\u0449\u0435\u043d\u0438\u044e."]})})]})]}),Object(l.jsx)("div",{className:"auth-container__right",children:Object(l.jsxs)("div",{className:"auth-container__right-loginSide",children:[Object(l.jsx)(d,{cls:"logo frontSvg"}),Object(l.jsx)("h4",{children:"\u0423\u0437\u043d\u0430\u0439\u0442\u0435, \u0447\u0442\u043e \u043f\u0440\u043e\u0438\u0441\u0445\u043e\u0434\u0438\u0442 \u0432 \u043c\u0438\u0440\u0435 \u043f\u0440\u044f\u043c\u043e \u0441\u0435\u0439\u0447\u0430\u0441"}),Object(l.jsx)("p",{children:"\u041f\u0440\u0438\u0441\u043e\u0435\u0434\u0438\u043d\u044f\u0439\u0442\u0435\u0441\u044c \u043a \u0422\u0432\u0438\u0442\u0442\u0435\u0440\u0443 \u043f\u0440\u044f\u043c\u043e \u0441\u0435\u0439\u0447\u0430\u0441!"}),Object(l.jsx)("br",{}),Object(l.jsx)(j,{text:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f",type:"primary",cls:"fullWidth mb-20",onClick:function(){return h(!0)}}),Object(l.jsx)(j,{text:"\u0412\u043e\u0439\u0442\u0438",type:"outlined",cls:"fullWidth",onClick:function(){return m(!0)}}),s&&Object(l.jsx)(Oe,{history:t,active:s,setActive:h}),O&&Object(l.jsx)(me,{history:t,active:O,setActive:m})]})})]})}),pe=c(80),ge=c.n(pe);var xe=function(e,t){Object(n.useEffect)((function(){t((function(e){return A.fetchChats().then((function(t){return t.forEach((function(e){e.Users.forEach((function(e){e.status="offline"})),e.Messages.reverse()})),e({type:F,payload:t}),t})).catch((function(e){throw e}))})).then((function(c){var n=ge.a.connect("http://127.0.0.1:3005");t(function(e){return function(t){t({type:z,payload:e})}}(n)),n.emit("join",e),n.on("typing",(function(e){t(function(e){return function(t){t({type:V,payload:e})}}(e))})),n.on("friends",(function(e){console.log("Friends",e),t(function(e){return function(t){t({type:q,payload:e})}}(e))})),n.on("online",(function(e){var c;t((c=e,function(e){e({type:B,payload:c})})),console.log("Online",e)})),n.on("offline",(function(e){var c;t((c=e,function(e){e({type:H,payload:c})})),console.log("Offline",e)})),n.on("received",(function(c){t(function(e,t){return function(c){c({type:P,payload:{message:e,userId:t}})}}(c,e.id))})),n.on("new-chat",(function(e){t(function(e){return function(t){t({type:J,payload:e})}}(e))})),n.on("added-user-to-group",(function(e){t(function(e){return function(t){t({type:Y,payload:e})}}(e))})),n.on("remove-user-from-chat",(function(c){c.currentUserId=e.id,t(function(e){return function(t){t({type:Z,payload:e})}}(c))})),n.on("delete-chat",(function(e){t(function(e){return function(t){t({type:K,payload:e})}}(e))})),console.log(c)})).catch((function(e){return console.log(e)}))}),[t])},ye=c(14);function Ne(e,t){var c=Object(n.useRef)();return Object(n.useCallback)((function(){for(var n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];c.current&&clearTimeout(c.current),c.current=setTimeout((function(){e.apply(void 0,a)}),t)}),[e,t])}var _e=c.p+"static/media/searchIcon.507667a6.svg",Ce=(c(152),function(e){var t=e.chat,c=Object(n.useState)(!1),a=Object(i.a)(c,2),r=a[0],s=a[1],u=Object(n.useState)(!1),d=Object(i.a)(u,2),h=d[0],b=d[1],O=Object(n.useState)(!1),m=Object(i.a)(O,2),v=(m[0],m[1],Object(n.useState)(!1)),p=Object(i.a)(v,2),g=(p[0],p[1],Object(n.useState)([])),x=Object(i.a)(g,2),y=x[0],N=x[1],_=Object(o.c)((function(e){return e.chatReducer.socket})),C=Ne((function(e){A.searchUsers(e.target.value).then((function(e){return N(e)}))}),650);return Object(l.jsxs)(n.Fragment,{children:[Object(l.jsx)("div",{className:"chatter",children:t.Users.map((function(e){return Object(l.jsxs)("div",{className:"chatter__info",children:[Object(l.jsxs)("h3",{children:[e.firstName," ",e.lastName]}),Object(l.jsx)("div",{className:"chatter__info-status",children:Object(l.jsx)("span",{className:"online-status ".concat("online"===e.status?"online":"offline")})})]},e.id)}))}),Object(l.jsx)(ye.a,{onClick:function(){return s(!r)},icon:["fas","ellipsis-v"],className:"fa-icon"}),r?Object(l.jsx)("div",{id:"wrapper-overflow",onClick:function(){return s(!1)},children:Object(l.jsxs)("div",{id:"settings",children:[Object(l.jsxs)("div",{onClick:function(){return b(!0)},children:[Object(l.jsx)(ye.a,{icon:["fas","user-plus"],className:"fa-icon"}),Object(l.jsx)("p",{children:"Add user to chat"})]}),"group"===t.type?Object(l.jsxs)("div",{onClick:function(){A.leaveCurrentChat(t.id).then((function(e){_.emit("leave-current-chat",e)})).catch((function(e){return console.log(e)}))},children:[Object(l.jsx)(ye.a,{icon:["fas","sign-out-alt"],className:"fa-icon"}),Object(l.jsx)("p",{children:"Leave chat"})]}):null,"dual"===t.type?Object(l.jsxs)("div",{onClick:function(){A.deleteCurrentChat(t.id).then((function(e){_.emit("delete-chat",e)}))},children:[Object(l.jsx)(ye.a,{icon:["fas","trash"],className:"fa-icon"}),Object(l.jsx)("p",{children:"Delete chat"})]}):null]})}):null,h&&Object(l.jsxs)(f,{active:h,setActive:b,auth:!1,children:[Object(l.jsxs)("div",{className:"modal__bottom-image-about--left",children:[Object(l.jsx)("img",{src:_e}),Object(l.jsx)("span",{className:"m-0",children:"Add friend to group chat"})]}),Object(l.jsxs)("div",{className:"modal__bottom-info",children:[Object(l.jsxs)("div",{className:"modal__text",children:[Object(l.jsx)("div",{className:"modal__text-top",children:Object(l.jsx)("span",{children:"Find friends by typing their name bellow:"})}),Object(l.jsx)("div",{className:"modal__text-bottom",children:Object(l.jsx)("input",{onInput:function(e){return C(e)},type:"text",placeholder:"Search..."})})]}),Object(l.jsx)("div",{className:"modal__bottom-children",children:Object(l.jsx)("div",{id:"suggestions",children:y.map((function(e){return Object(l.jsxs)("div",{className:"suggestion",children:[Object(l.jsxs)("span",{className:"m-0",children:[Object(l.jsx)("img",{src:"".concat(e.avatar)}),e.firstName," ",e.lastName]}),Object(l.jsx)(j,{type:"outlined",text:"ADD",cls:"search-btn",onClick:function(){return c=e.id,void A.addFriendToGroupChat(c,t.id).then((function(e){_.emit("add-user-to-group",e),b(!1)})).catch((function(e){return console.log(e)}));var c}})]},e.id)}))})})]})]})]})}),we=(c(153),function(e){var t=e.user,c=e.chat,n=e.index,a=e.message;return Object(l.jsx)("div",{className:"message ".concat(function(){if(n+1!==c.Messages.length)return a.fromUserId===c.Messages[n+1].fromUserId?"mb-5":"mb-10"}()," ").concat(a.fromUserId===t.id?"creator":""),children:Object(l.jsxs)("div",{className:a.fromUserId===t.id?"owner":"other-person",children:[a.fromUserId!==t.id?Object(l.jsxs)("h6",{className:"m-0",children:[a.User.firstName," ",a.User.lastName]}):null," ","text"===a.type?Object(l.jsx)("p",{className:"m-0",children:a.message}):Object(l.jsx)("img",{src:a.message,alt:"User upload"})]})})}),ke=(c(154),function(e){var t=e.chat,c=Object(o.b)(),a=Object(o.c)((function(e){return e.auth.user})),r=Object(o.c)((function(e){return e.chatReducer.scrollBottom})),s=Object(o.c)((function(e){return e.chatReducer.senderTyping})),u=Object(n.useState)(!1),d=Object(i.a)(u,2),j=d[0],h=d[1],b=Object(n.useState)(0),f=Object(i.a)(b,2),O=f[0],m=f[1],v=Object(n.useRef)(),p=function(e){v.current.scrollTop=e};return Object(n.useEffect)((function(){setTimeout((function(){p(Math.ceil(.1*v.current.scrollHeight))}),100)}),[O]),Object(n.useEffect)((function(){s.typing&&v.current.scrollTop>.3*v.current.scrollHeight&&setTimeout((function(){p(v.current.scrollHeight)}),100)}),[s]),Object(n.useEffect)((function(){s.typing||setTimeout((function(){p(v.current.scrollHeight)}),100)}),[r]),Object(l.jsxs)("div",{onScroll:function(e){if(0===e.target.scrollTop){h(!0);var n=t.Pagination,a="undefined"===typeof n?1:n.page;c(function(e,t){return function(c){return A.paginateMessages(e,t).then((function(t){var n=t.messages,a=t.pagination;return"undefined"!==typeof n&&n.length>0&&(n.reverse(),c({type:G,payload:{messages:n,id:e,pagination:a}}),!0)})).catch((function(e){throw e}))}}(t.id,parseInt(a)+1)).then((function(e){e&&m(O+1),h(!1)})).catch((function(e){h(!1)}))}},className:"msg-box",id:"msg-box",ref:v,children:[j?Object(l.jsx)("p",{className:"loader m-0",children:Object(l.jsx)(ye.a,{icon:"spinner",className:"fa-spin"})}):null,t.Messages.map((function(e,c){return Object(l.jsx)(n.Fragment,{children:Object(l.jsx)(we,{user:a,chat:t,message:e,index:c},e.id)})})),s.typing&&s.chatId===t.id?Object(l.jsx)("div",{className:"message mt-5p",children:Object(l.jsx)("div",{className:"other-person",children:Object(l.jsxs)("p",{className:"m-0",children:[s.fromUser.firstName," ",s.fromUser.lastName,"..."]})})}):null]})}),Se=c(82),Ee=(c(156),c(157),function(e){var t=e.chat,c=Object(o.b)(),a=Object(o.c)((function(e){return e.auth.user})),r=Object(o.c)((function(e){return e.chatReducer.socket})),s=Object(o.c)((function(e){return e.chatReducer.newMessage})),u=Object(n.useRef)(),d=Object(n.useRef)(),j=Object(n.useState)(""),h=Object(i.a)(j,2),b=h[0],f=h[1],O=Object(n.useState)(""),m=Object(i.a)(O,2),v=m[0],p=m[1],g=Object(n.useState)(!1),x=Object(i.a)(g,2),y=x[0],N=x[1],_=Object(n.useState)(!1),C=Object(i.a)(_,2),w=C[0],k=C[1],S=function(e){if(!(b.length<1)||e){var c={type:e?"image":"text",fromUser:a,toUserId:t.Users.map((function(e){return e.id})),chatId:t.id,message:e||b};f(""),p(""),N(!1),d.current.value="",r.emit("message",c)}};Object(n.useEffect)((function(){var e=document.getElementById("msg-box");s.seen||s.chatId!==t.id||e.scrollHeight===e.clientHeight?k(!1):e.scrollTop>.3*e.scrollHeight?c(X()):k(!0)}),[s,c]);return Object(l.jsxs)("div",{id:"input-container",children:[Object(l.jsxs)("div",{id:"image-upload-container",children:[Object(l.jsx)("div",{children:w?Object(l.jsxs)("div",{id:"message-notification",onClick:function(){c(X()),k(!1)},children:[Object(l.jsx)(ye.a,{icon:"bell",className:"fa-icon"}),Object(l.jsx)("p",{className:"m-0",children:"new message"})]}):null}),Object(l.jsxs)("div",{id:"image-upload",children:[v.name?Object(l.jsxs)("div",{id:"image-details",children:[Object(l.jsx)("p",{className:"m-0",children:v.name}),Object(l.jsx)(ye.a,{onClick:function(){var e=new FormData;e.append("id",t.id),e.append("image",v),A.uploadImage(e).then((function(e){S(e)})).catch((function(e){return console.log(e)}))},icon:"upload",className:"fa-icon"}),Object(l.jsx)(ye.a,{onClick:function(){return p("")},icon:"times",className:"fa-icon"})]}):null,Object(l.jsx)(ye.a,{onClick:function(){return u.current.click()},icon:["far","image"],className:"fa-icon"})]})]}),Object(l.jsxs)("div",{id:"message-input",children:[Object(l.jsx)("textarea",{className:"textArea",style:{marginBottom:0},ref:d,value:b,type:"text",placeholder:"Message...",onChange:function(e){return function(e){var c=e.target.value;f(c);var n={chatId:t.id,fromUser:a,toUserId:t.Users.map((function(e){return e.id}))};1===c.length&&(n.typing=!0,r.emit("typing",n)),0===c.length&&(n.typing=!1,r.emit("typing",n))}(e)},onKeyDown:function(e){return function(e,t){"Enter"===e.key&&(e.preventDefault(),S(t))}(e,!1)}}),Object(l.jsx)(ye.a,{onClick:function(){return N(!y)},icon:["far","smile"],className:"fa-icon"})]}),Object(l.jsx)("input",{id:"chat-image",ref:u,type:"file",onChange:function(e){return p(e.target.files[0])}}),y?Object(l.jsx)(Se.a,{title:"Pick your emoji...",emoji:"point_up",style:{position:"absolute",bottom:"20px",right:"20px"},onSelect:function(e){var t=d.current.selectionStart,c=d.current.selectionEnd,n=e.native.length,a=d.current.value;f(a.substring(0,t)+e.native+a.substring(c,a.length)),d.current.focus(),d.current.selectionEnd=c+n}}):null]})}),Ie=(c(158),function(){var e=Object(o.c)((function(e){return e.chatReducer.currentChat}));return Object(l.jsx)("div",{className:"messenger shadow-light",children:Object.keys(e).length>0?Object(l.jsxs)("div",{className:"messenger__wrap",children:[Object(l.jsx)(Ce,{chat:e}),Object(l.jsx)("hr",{}),Object(l.jsx)(ke,{chat:e}),Object(l.jsx)(Ee,{chat:e})]}):Object(l.jsx)("p",{children:"No active chat"})})}),Me=(c(159),function(e){var t=e.chat,c=e.click,n=Object(o.c)((function(e){return e.chatReducer.currentChat}));return Object(l.jsxs)("div",{onClick:c,className:"friend-list ".concat(n.id===t.id?"opened":""),children:[Object(l.jsxs)("div",{children:[Object(l.jsx)("img",{width:"40",height:"40",alt:"User avatar",src:t.Users[0].avatar}),Object(l.jsxs)("div",{className:"friend-info",children:[Object(l.jsxs)("h4",{className:"m-0",children:[t.Users[0].firstName," ",t.Users[0].lastName]}),Object(l.jsx)("h5",{className:"m-0",children:function(){if(0===t.Messages.length)return"";var e=t.Messages[t.Messages.length-1];return"image"===e.type?"image uploaded":e.message}()})]})]}),Object(l.jsx)("div",{className:"friend-status",children:Object(l.jsx)("span",{className:"online-status ".concat("online"===t.Users[0].status?"online":"offline")})})]})}),Ue=c.p+"static/media/chat.8b06f605.svg",Le=(c(160),function(){var e=Object(o.b)(),t=Object(o.c)((function(e){return e.chatReducer.chats})),c=Object(o.c)((function(e){return e.chatReducer.socket})),a=Object(n.useState)(!1),r=Object(i.a)(a,2),s=r[0],u=r[1],d=Object(n.useState)(!1),h=Object(i.a)(d,2),b=h[0],O=h[1],m=Object(n.useState)([]),v=Object(i.a)(m,2),p=v[0],g=v[1],x=function(t){e(function(e){return function(t){t({type:D,payload:e})}}(t))},y=Ne((function(e){A.searchUsers(e.target.value).then((function(e){return g(e)}))}),650);return Object(l.jsxs)("div",{className:"friends shadow-light",children:[Object(l.jsxs)("div",{className:"friends__title",children:[Object(l.jsx)("h3",{className:"m-0",children:"Friends"}),Object(l.jsx)(j,{cls:"friends__title-button",onClick:function(){return u(!0)},text:"ADD"})]}),Object(l.jsx)("hr",{}),Object(l.jsx)("div",{className:"friends__box",children:t.length>0?t.map((function(e){return Object(l.jsx)(Me,{click:function(){return x(e)},chat:e},e.id)})):Object(l.jsx)("p",{id:"no-chat",children:"No friends added"})}),s&&Object(l.jsxs)(f,{active:s,setActive:u,auth:!1,children:[Object(l.jsx)("div",{className:"modal__bottom-image-about",children:Object(l.jsx)("img",{src:Ue})}),Object(l.jsxs)("div",{className:"modal__bottom-info",children:[Object(l.jsxs)("div",{className:"modal__text",children:[Object(l.jsx)("div",{className:"modal__text-top",children:Object(l.jsx)("span",{children:"\u0427\u0442\u043e\u0431\u044b \u043d\u0430\u0447\u0430\u0442\u044c \u0434\u0438\u0430\u043b\u043e\u0433 \u043d\u0430\u0447\u043d\u0438\u0442\u0435 \u0438\u0441\u043a\u0430\u0442\u044c \u0434\u0440\u0443\u0433\u043e\u0433\u043e \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f"})}),Object(l.jsx)("div",{className:"modal__text-bottom",children:Object(l.jsx)("span",{children:"\u041a\u043e\u0433\u0434\u0430 \u0432\u044b \u043d\u0430\u0439\u0434\u0435\u0442\u0435 \u043d\u0443\u0436\u043d\u043e\u0433\u043e \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f, \u0432\u044b \u0441\u043c\u043e\u0436\u0435\u0442\u0435 \u0434\u0435\u043b\u0438\u0442\u044c\u0441\u044f \u0441 \u043d\u0438\u043c \u0441 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f\u043c\u0438 \u0438 \u043c\u0435\u0434\u0438\u0430."})})]}),Object(l.jsx)("div",{className:"modal__bottom-children",children:Object(l.jsx)(j,{text:"\u041f\u0440\u043e\u0434\u043e\u043b\u0436\u0438\u0442\u044c",type:"primary",cls:"fullWidth",onClick:function(){u(!1),O(!0)}})})]})]}),b&&Object(l.jsxs)(f,{active:b,setActive:O,auth:!1,children:[Object(l.jsxs)("div",{className:"modal__bottom-image-about--left",children:[Object(l.jsx)("img",{src:_e}),Object(l.jsx)("span",{className:"m-0",children:"Create new chat"})]}),Object(l.jsxs)("div",{className:"modal__bottom-info",children:[Object(l.jsxs)("div",{className:"modal__text",children:[Object(l.jsx)("div",{className:"modal__text-top",children:Object(l.jsx)("span",{children:"Find friends by typing their name bellow:"})}),Object(l.jsx)("div",{className:"modal__text-bottom",children:Object(l.jsx)("input",{onInput:function(e){return y(e)},type:"text",placeholder:"Search..."})})]}),Object(l.jsx)("div",{className:"modal__bottom-children",children:Object(l.jsx)("div",{id:"suggestions",children:p.map((function(e){return Object(l.jsxs)("div",{className:"suggestion",children:[Object(l.jsxs)("span",{className:"m-0",children:[Object(l.jsx)("img",{src:"".concat(e.avatar)}),e.firstName," ",e.lastName]}),Object(l.jsx)(j,{type:"outlined",text:"ADD",cls:"search-btn",onClick:function(){return t=e.id,void A.createChat(t).then((function(e){c.emit("add-friend",e),O(!1)})).catch((function(e){return console.log(e)}));var t}})]},e.id)}))})})]})]})]})}),Te=c.p+"static/media/updateProfile.bda42358.svg",Re=(c(161),function(){var e=Object(o.b)(),t=Object(o.c)((function(e){return e.auth.user})),c=Object(n.useState)(!1),a=Object(i.a)(c,2),r=a[0],s=a[1],u=Object(n.useState)(!1),d=Object(i.a)(u,2),m=d[0],v=d[1],p=Object(n.useState)(!0),g=Object(i.a)(p,2),x=g[0],y=g[1],N=Object(n.useState)(""),_=Object(i.a)(N,2),C=_[0],w=_[1],k=Object(n.useState)({firstName:{value:"".concat(t.firstName),type:"text",typeField:"input",errorMessage:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0438\u043c\u044f",label:"\u0418\u043c\u044f",valid:!0,touched:!1,validation:{required:fe.required,minLength:fe.minLength(1)}},lastName:{value:"".concat(t.lastName),type:"text",typeField:"input",errorMessage:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0444\u0430\u043c\u0438\u043b\u0438\u044e",label:"\u0424\u0430\u043c\u0438\u043b\u0438\u044f",valid:!0,touched:!1,validation:{required:fe.required,minLength:fe.minLength(1)}},email:{value:"".concat(t.email),type:"text",typeField:"input",errorMessage:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u044b\u0439 email",label:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u043e\u0447\u0442\u0443",valid:!0,touched:!1,validation:{required:fe.required,email:fe.emailRequired}},password:{value:"",type:"password",typeField:"input",label:"\u041f\u0430\u0440\u043e\u043b\u044c",errorMessage:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c",valid:!0,touched:!1,validation:{required:fe.required,minLength:fe.minLength(4)}},gender:{value:"".concat(t.gender),type:"text",typeField:"input",label:"\u041f\u043e\u043b",errorMessage:"\u0417\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u0435 \u044d\u0442\u043e \u043f\u043e\u043b\u0435",valid:!0,touched:!1,validation:{required:fe.required,minLength:fe.minLength(4)}},infoSelf:{value:"".concat(t.infoSelf),type:"text",typeField:"textarea",label:"\u0418\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f \u043f\u0440\u043e \u0441\u0435\u0431\u044f",errorMessage:"\u0417\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u0435 \u044d\u0442\u043e \u043f\u043e\u043b\u0435",valid:!0,touched:!1,validation:{}}}),S=Object(i.a)(k,2),E=S[0],I=S[1],M=function(e){var t=e.target,c=t.name,n=t.value,a=Object(h.a)({},E[c]);a.value=n,a.touched=!0,a.valid=function(e,t){if(!t)return!0;var c=!0;return Object.keys(t).forEach((function(n){var a=t[n];c=a(e)})),c}(n,a.validation);var r=!0;Object.keys(E).forEach((function(e){r=E[e].valid&&r})),y(r),I((function(e){return Object(h.a)(Object(h.a)({},e),{},Object(b.a)({},c,a))}))};return Object(l.jsx)(n.Fragment,{children:Object(l.jsxs)("div",{className:"navbar card-shadow",children:[Object(l.jsx)("h2",{children:"CHat"}),r&&Object(l.jsx)("div",{id:"wrapper-overflow",onClick:function(){return s(!1)}}),Object(l.jsxs)("div",{className:"navbar__profile",onClick:function(e){s(!r)},children:[Object(l.jsx)("img",{width:"40",height:"40",src:t.avatar,alt:"Avatar"}),Object(l.jsxs)("p",{children:[t.firstName," ",t.lastName]}),Object(l.jsx)(ye.a,{icon:"caret-down",className:"fa-icon"}),r&&Object(l.jsxs)("div",{className:"options",children:[Object(l.jsx)("p",{onClick:function(){e(de())},children:"Logout"}),Object(l.jsx)("p",{onClick:function(){v(!0)},children:"Update profile"})]})]}),m&&Object(l.jsxs)(f,{active:m,setActive:v,auth:!1,children:[Object(l.jsxs)("div",{className:"modal__bottom-image-about--left",style:{marginBottom:"25px"},children:[Object(l.jsx)("img",{src:Te}),Object(l.jsx)("span",{className:"m-0",children:"Update profile"})]}),Object(l.jsx)("div",{className:"modal__bottom-info",children:Object(l.jsxs)("form",{className:"auth__form",style:{width:"400px"},children:[Object.keys(E).map((function(e,t){var c=E[e];return"input"===c.typeField?Object(l.jsx)(O,{type:c.type,value:c.value,name:e,valid:c.valid,touched:c.touched,label:c.label,shouldValidate:!!c.validation,errorMessage:c.errorMessage,onChange:M},e+t):Object(l.jsx)("textarea",{type:c.type,value:c.value,name:e,className:"textArea",onChange:M},e+t)})),Object(l.jsxs)("div",{className:"fileContainer",children:[Object(l.jsx)("span",{id:"spanFile",children:"\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c"}),Object(l.jsx)("input",{id:"inputFile",onChange:function(e){return w(e.target.files[0])},type:"file"})]}),Object(l.jsx)("div",{className:"modal__bottom-children",children:Object(l.jsx)(j,{text:"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c",type:"primary",cls:"fullWidth",onClick:function(t){t.preventDefault();var c=Object.keys(E).map((function(e){var t=E[e].value;return Object(b.a)({},e,t)})).reduce((function(e,t){return Object(h.a)(Object(h.a)({},e),t)}),{});c.password.length||delete c.password;var n,a=Object(h.a)(Object(h.a)({},c),{},{avatar:C}),r=new FormData;for(var s in a)r.set(s,a[s]);e((n=r,function(e){return le.updateProfile(n).then((function(t){e({type:U,payload:t})})).catch((function(e){throw e}))})).then((function(){return v(!1)}))},disabled:!x})})]})})]})]})})}),Ae=(c(162),function(){var e=Object(o.b)(),t=Object(o.c)((function(e){return e.auth.user}));return xe(t,e),Object(l.jsxs)("div",{id:"chat-container",children:[Object(l.jsx)(Re,{}),Object(l.jsxs)("div",{id:"chat-wrap",children:[Object(l.jsx)(Le,{}),Object(l.jsx)(Ie,{})]})]})}),Fe=c(83),De=["component"],qe=function(e){var t=e.component,c=Object(Fe.a)(e,De),n=Object(o.c)((function(e){return e.auth.isLoggedIn}));return Object(l.jsx)(u.b,Object(h.a)(Object(h.a)({},c),{},{render:function(e){return n?Object(l.jsx)(t,Object(h.a)({},e)):Object(l.jsx)(u.a,{to:"/auth"})}}))},Be=c(39),He=c(26),ze=c(52),Pe=c(23);He.b.add(ze.b,ze.a,Pe.e,Pe.c,Pe.i,Pe.d,Pe.g,Pe.b,Pe.h,Pe.f,Pe.a);var Ve=function(){return Object(l.jsx)(Be.a,{children:Object(l.jsx)("div",{className:"App",children:Object(l.jsxs)(u.d,{children:[Object(l.jsx)(u.b,{path:"/auth",component:ve}),Object(l.jsx)(qe,{exact:!0,path:"/",component:Ae}),Object(l.jsx)(u.b,{render:function(){return Object(l.jsx)("h1",{children:"404 page not found"})}})]})})})},Ge=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,164)).then((function(t){var c=t.getCLS,n=t.getFID,a=t.getFCP,r=t.getLCP,s=t.getTTFB;c(e),n(e),a(e),r(e),s(e)}))},We=c(81);s.a.render(Object(l.jsx)(a.a.StrictMode,{children:Object(l.jsx)(o.a,{store:ae,children:Object(l.jsx)(We.a,{persistor:re,children:Object(l.jsx)(Ve,{})})})}),document.getElementById("root")),Ge()},61:function(e,t,c){},88:function(e,t,c){},89:function(e,t,c){},95:function(e,t,c){},97:function(e,t,c){},98:function(e,t,c){},99:function(e,t,c){}},[[163,1,2]]]);
//# sourceMappingURL=main.c27a71ed.chunk.js.map