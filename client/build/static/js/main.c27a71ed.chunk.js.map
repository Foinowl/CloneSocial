{"version":3,"sources":["components/Logo/index.js","components/Logo/Logo.js","components/Button/index.js","components/Button/Button.js","components/Modal/index.js","components/Modal/Modal.js","components/Input/Input.js","components/SelectDate/MonthSelect.js","utils/utils.js","components/SelectDate/YearSelect.js","components/SelectDate/DaySelect.js","store/types/index.js","store/reducers/auth.js","services/chatService.js","store/actions/chat.js","store/reducers/chat.js","store/reducers/index.js","store/index.js","services/api.js","services/authService.js","store/actions/auth.js","utils/validators.js","pages/Authentication/components/RegisterModal.js","pages/Authentication/components/LoginModal.js","pages/Authentication/Auth.js","pages/Chat/hooks/socketConnect.js","pages/Chat/hooks/useDebounce.js","assets/images/searchIcon.svg","pages/Chat/components/ChatHeader/ChatHeader.js","pages/Chat/components/Message/Message.js","pages/Chat/components/MessageBox/MessageBox.js","pages/Chat/components/MessageInput/MessageInput.js","pages/Chat/components/Messenger/Messenger.js","pages/Chat/components/Friend/Friend.js","assets/images/chat.svg","pages/Chat/components/FriendList/FriendList.js","assets/images/updateProfile.svg","pages/Chat/components/Navbar/Navbar.js","pages/Chat/Chat.js","components/Router/ProtectedRoute.js","App.js","reportWebVitals.js","index.js"],"names":["Logo","cls","focusable","viewBox","className","d","Button","props","text","type","onClick","disabled","parentRef","React","useRef","currentRef","onMouseDown","event","preventDefault","parent","current","getBoundingClientRect","element","relX","pageX","x","relY","pageY","y","style","top","left","ref","Modal","active","setActive","auth","children","isAuth","e","stopPropagation","Input","inputType","htmlFor","Math","random","refBlock","refSpan","useEffect","debouncer","setTimeout","valid","touched","shouldValidate","isInvalid","classList","add","innerHTML","errorMessage","remove","clearTimeout","value","name","id","onChange","required","tabIndex","label","data","MonthSelect","setValue","target","hidden","map","el","i","range","start","end","push","YearSelect","yearsRange","year","DaySelect","m","Number","month","last","Date","getDate","copyValue","LOGIN","REGISTER","LOGOUT","UPDATE_PROFILE","initialState","user","token","isLoggedIn","authReducer","state","action","payload","ChatService","fetchChats","API","get","then","catch","err","uploadImage","post","headers","url","paginateMessages","page","params","searchUsers","term","createChat","partnerId","addFriendToGroupChat","userId","chatId","leaveCurrentChat","deleteCurrentChat","delete","FETCH_CHATS","SET_CURRENT_CHAT","FRIENDS_ONLINE","FRIEND_ONLINE","FRIEND_OFFLINE","SET_SOCKET","RECEIVED_MESSAGE","SENDER_TYPING","PAGINATE_MESSAGES","INCREMENT_SCROLL","CREATE_CHAT","ADD_USER_TO_GROUP","LEAVE_CURRENT_CHAT","DELETE_CURRENT_CHAT","incrementScroll","dispatch","chats","currentChat","socket","newMessage","seen","scrollBottom","senderTyping","typing","chatReducer","console","log","chatsCopy","chat","Users","includes","status","currentChatCopy","parseInt","message","User","Messages","messages","pagination","shifted","Pagination","chatters","exists","chatState","Object","keys","length","currentUserId","filter","persistConfig","key","storage","whitelist","rootReducer","combineReducers","persistReducer","enhancer","composeEnhancers","compose","applyMiddleware","thunk","store","createStore","persistor","persistStore","JSON","parse","localStorage","getItem","newData","axios","create","baseURL","Accept","Authorization","interceptors","response","use","res","error","logout","AuthService","login","register","defaults","removeItem","updateProfile","setItem","stringify","emailRegExp","Validators","trim","RegExp","test","RegisterModal","history","useDispatch","useState","days","setDays","years","setYears","months","setMonths","formValid","setFormValid","selectValid","setSelectValid","firstName","validation","minLength","lastName","email","emailRequired","password","stateControls","setControls","changeInputs","control","isValid","forEach","validateControl","isFormValid","prevState","controlName","index","v","getFullYear","dateBirth","valueEl","reduce","prevVal","curr","LoginModal","Auth","useSelector","registerModalActive","setRegisterModalActive","loginModalActive","setLoginModalActive","class","useSocket","reverse","socketIOClient","connect","setSocket","emit","on","sender","friends","onlineFriends","friend","receivedMessage","group","addUserToGroup","useDebounce","callback","delay","timer","useCallback","args","ChatHeader","showChatOptions","setShowChatOptions","showAddFriendModal","setShowAddFriendModal","suggestions","setSuggestions","debouncedSearch","icon","src","searchIcon","onInput","placeholder","avatar","Message","fromUserId","determineMargin","alt","MessageBox","loading","setLoading","scrollUp","setScrollUp","msgBox","scrollManual","scrollTop","ceil","scrollHeight","onScroll","fromUser","MessageInput","fileUpload","msgInput","setMessage","image","setImage","showEmojiPicker","setShowEmojiPicker","showNewMessageNotification","setShowNewMessageNotification","sendMessage","imageUpload","msg","toUserId","document","getElementById","clientHeight","formData","FormData","append","click","marginBottom","receiver","handleMessage","onKeyDown","handleKeyDown","files","title","emoji","position","bottom","right","onSelect","startPosition","selectionStart","endPosition","selectionEnd","emojiLength","native","substring","focus","Messenger","Friend","width","height","lastMessage","FriendList","showAboutFriendsModal","setshowAboutFriendsModal","showFriendsModal","setShowFriendsModal","openChat","setCurrentChat","Navbar","showProfileOptions","setShowProfileOptions","showProfileModal","setShowProfileModal","setAvatar","typeField","gender","infoSelf","updateProfileSvg","form","set","Chat","ProtectedRoute","Component","component","render","to","library","faSmile","faImage","faSpinner","faEllipsisV","faUserPlus","faSignOutAlt","faTrash","faCaretDown","faUpload","faTimes","faBell","App","path","exact","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","StrictMode"],"mappings":"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","file":"static/js/main.c27a71ed.chunk.js","sourcesContent":["import Logo from \"./Logo\"\r\n\r\nexport default Logo","import React from 'react'\r\nimport './Logo.scss'\r\n\r\nconst Logo = ({cls=\"\"}) => {\r\n    \r\n  return (\r\n\t\t<svg focusable=\"false\" viewBox=\"0 0 24 24\" aria-hidden=\"true\" className={`svg-el ${cls}`}> \r\n\t\t\t<path d=\"M22.46 6c-.77.35-1.6.58-2.46.69.88-.53 1.56-1.37 1.88-2.38-.83.5-1.75.85-2.72 1.05C18.37 4.5 17.26 4 16 4c-2.35 0-4.27 1.92-4.27 4.29 0 .34.04.67.11.98C8.28 9.09 5.11 7.38 3 4.79c-.37.63-.58 1.37-.58 2.15 0 1.49.75 2.81 1.91 3.56-.71 0-1.37-.2-1.95-.5v.03c0 2.08 1.48 3.82 3.44 4.21a4.22 4.22 0 0 1-1.93.07 4.28 4.28 0 0 0 4 2.98 8.521 8.521 0 0 1-5.33 1.84c-.34 0-.68-.02-1.02-.06C3.44 20.29 5.7 21 8.12 21 16 21 20.33 14.46 20.33 8.79c0-.19 0-.37-.01-.56.84-.6 1.56-1.36 2.14-2.23z\"></path>\r\n\t\t</svg>\r\n\t)\r\n}\r\n\r\nexport default Logo","import Button from './Button'\r\n\r\nexport default Button","import React from 'react'\r\nimport './Button.scss'\r\n\r\nconst Button = (props) => {\r\n\r\n\r\n\tconst { text, type, onClick, cls, disabled = false } = props\r\n\t\r\n\r\n\tconst parentRef = React.useRef()\r\n\tconst currentRef = React.useRef()\r\n\r\n \tconst hadlerMouse = (event) => {\r\n\t\tevent.preventDefault()\r\n\r\n\t\t\tconst parent = parentRef.current.getBoundingClientRect()\r\n\t\t\t\r\n\t\t\tconst element = event\r\n\r\n\t\t\tconst relX = element.pageX - parent.x\r\n\t\t\tconst relY = element.pageY - parent.y\r\n\r\n\t\t\tcurrentRef.current.style.top = relY + \"px\"\r\n\t\t\tcurrentRef.current.style.left = relX + \"px\"\r\n\t}\r\n\r\n\treturn (\r\n\t\t<button\r\n\t\t\tonClick={onClick}\r\n\t\t\tonMouseDown={hadlerMouse}\r\n\t\t\ttype=\"button\"\r\n\t\t\tdisabled={disabled}\r\n\t\t\tclassName={`${\"rootButton\"} ${\r\n\t\t\t\ttype === \"primary\" ? \"inLinedPrimary\" : \"outlinedPrimary\"\r\n\t\t\t} ${cls}`}\r\n\t\t\tref={parentRef}\r\n\t\t>\r\n\t\t\t{text}\r\n\t\t\t<span ref={currentRef}></span>\r\n\t\t</button>\r\n\t)\r\n}\r\n\r\nexport default Button","import Modal from \"./Modal\"\r\n\r\nexport default Modal","import React, { useRef } from 'react'\r\nimport \"./Modal.scss\"\r\nimport Button from '../Button'\r\n\r\nconst Modal = ({ active, setActive, auth, children }) => {\r\n\tconst isAuth = auth ? true : false\r\n\r\n\tconst markupDefaults = () => {\r\n\t\treturn (\r\n\t\t\t<>\r\n\t\t\t\t{children}\r\n\t\t\t</>\r\n\t\t)\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div\r\n\t\t\tclassName={active ? \"modal active\" : \"modal\"}\r\n\t\t\tonClick={() => setActive(false)}\r\n\t\t>\r\n\t\t\t<div\r\n\t\t\t\tclassName={active ? \"modal__content active\" : \"modal__content\"}\r\n\t\t\t\tonClick={(e) => e.stopPropagation()}\r\n\t\t\t>\r\n\t\t\t\t<div className=\"modal__content-top\">\r\n\t\t\t\t\t<div className=\"container-close\" onClick={() => setActive(false)}>\r\n\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\tviewBox=\"0 0 24 24\"\r\n\t\t\t\t\t\t\taria-hidden=\"true\"\r\n\t\t\t\t\t\t\tclassName=\"container-close__svg\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<path d=\"M13.414 12l5.793-5.793c.39-.39.39-1.023 0-1.414s-1.023-.39-1.414 0L12 10.586 6.207 4.793c-.39-.39-1.023-.39-1.414 0s-.39 1.023 0 1.414L10.586 12l-5.793 5.793c-.39.39-.39 1.023 0 1.414.195.195.45.293.707.293s.512-.098.707-.293L12 13.414l5.793 5.793c.195.195.45.293.707.293s.512-.098.707-.293c.39-.39.39-1.023 0-1.414L13.414 12z\"></path>\r\n\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<div className=\"modal__content-bottom\">\r\n\t\t\t\t\t{isAuth ? children : markupDefaults()}\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default Modal","import React, { useEffect, useRef } from \"react\"\r\nimport \"./Input.scss\"\r\n\r\nfunction isInvalid({ valid, touched, shouldValidate }) {\r\n\treturn !valid && shouldValidate && touched\r\n}\r\n\r\nconst Input = (props) => {\r\n\tconst inputType = props.type || \"text\"\r\n  const htmlFor = `${inputType}-${Math.random()}`\r\n  const refBlock = useRef()\r\n  const refSpan = useRef()\r\n\r\n  useEffect(() => {\r\n\r\n\t\tlet debouncer = setTimeout(() => {\r\n      if (isInvalid(props)) {\r\n        \r\n        refBlock.current.classList.add(\"input__block--error\")\r\n        refSpan.current.innerHTML = props.errorMessage || \"Введите верное значение\"\r\n\r\n      }\r\n    }, 350)\r\n\r\n    refBlock.current.classList.remove(\"input__block--error\")\r\n    refSpan.current.innerHTML = \"\"\r\n\r\n\t\treturn () => {\r\n      clearTimeout(debouncer)\r\n\t\t}\r\n  }, [props.value])\r\n  \r\n\r\n\treturn (\r\n\t\t<div className={`input__block`} ref={refBlock}>\r\n\t\t\t<input\r\n\t\t\t\tname={props.name}\r\n\t\t\t\ttype={inputType}\r\n\t\t\t\tid={htmlFor}\r\n\t\t\t\tvalue={props.value}\r\n\t\t\t\tonChange={props.onChange}\r\n\t\t\t\trequired\r\n\t\t\t\ttabIndex=\"0\"\r\n\t\t\t/>\r\n      <label htmlFor=\"\">{props.label}</label>\r\n      \r\n      <span ref={refSpan}></span>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default Input\r\n","import React from \"react\"\r\n\r\n\r\nconst data = [\r\n\t\"Январь\",\r\n\t\"Февраль\",\r\n\t\"Март\",\r\n\t\"Апрель\",\r\n\t\"Май\",\r\n\t\"Июнь\",\r\n\t\"Июль\",\r\n\t\"Август\",\r\n\t\"Сентябрь\",\r\n\t\"Октябрь\",\r\n\t\"Ноябрь\",\r\n\t\"Декабрь\",\r\n]\r\n\r\n\r\nconst MonthSelect = ({ cls, setValue, value, onChange }) => {\r\n\tconst handleChange = (e) => {\r\n\t\tonChange && onChange(e.target.value)\r\n\t}\r\n\r\n\treturn (\r\n\t\t<select value={value} className={cls} onChange={handleChange}>\r\n\t\t\t<option value={\"\"} disabled hidden></option>\r\n\t\t\t{data.map((el, i) => (\r\n\t\t\t\t<option value={`${i + 1}`} key={`${el}-${i}`}>\r\n\t\t\t\t\t{el}\r\n\t\t\t\t</option>\r\n\t\t\t))}\r\n\t\t</select>\r\n\t)\r\n}\r\n\r\nexport default MonthSelect\r\n","export function range(start, end) {\r\n\tlet data = []\r\n\tfor (var i = start; i < end; i++) {\r\n\t\tdata.push(i)\r\n\t}\r\n\treturn data\r\n}\r\n","import React from 'react'\r\nimport { range } from '../../utils/utils'\r\n\r\n\r\nconst YearSelect = (props) => {\r\n  const { start, end, cls, value } = props\r\n  \r\n  const yearsRange = range(start, end + 1)\r\n  \r\n\r\n\tconst handleChange = (e) => {\r\n\t\tprops.onChange && props.onChange(e.target.value)\r\n\t}\r\n\r\n  return (\r\n\t\t<select value={value} className={cls} onChange={handleChange}>\r\n\t\t\t<option disabled value={\"\"} hidden></option>\r\n\t\t\t{yearsRange.map((year, i) => (\r\n\t\t\t\t<option value={year} key={year}>\r\n\t\t\t\t\t{year}\r\n\t\t\t\t</option>\r\n\t\t\t))}\r\n\t\t</select>\r\n\t)\r\n}\r\n\r\n\r\n\r\nexport default YearSelect\r\n\r\n","import React, { useEffect, useRef } from \"react\"\r\nimport { range } from \"../../utils/utils\"\r\n\r\nconst DaySelect = ({ cls, setValue, y, m, value, onChange }) => {\r\n\tconst changeOptionHandler = (e) => {\r\n\t\tsetValue(e.target.value)\r\n\t}\r\n\r\n\tconst handleChange = (e) => {\r\n\t\tonChange && onChange(e.target.value)\r\n\t}\r\n\r\n\tconst year = Number(y)\r\n\tconst month = Number(m)\r\n\r\n\tconst last = new Date(year, month, 0).getDate()\r\n\r\n\tconst copyValue = value > last ? \"\" : value\r\n\r\n\treturn (\r\n\t\t<select value={copyValue} className={cls} onChange={handleChange}>\r\n\t\t\t<option value={\"\"} disabled hidden></option>\r\n\t\t\t{range(1, last + 1).map((el, i) => (\r\n\t\t\t\t<option value={`${i + 1}`} key={`${el}-${i}`}>\r\n\t\t\t\t\t{el}\r\n\t\t\t\t</option>\r\n\t\t\t))}\r\n\t\t</select>\r\n\t)\r\n}\r\nexport default DaySelect\r\n","export const LOGIN = \"LOGIN\"\r\nexport const REGISTER = \"REGISTER\"\r\nexport const LOGOUT = \"LOGOUT\"\r\nexport const UPDATE_PROFILE = \"UPDATE_PROFILE\"\r\n","import { LOGIN, REGISTER, LOGOUT, UPDATE_PROFILE } from \"../types/index\"\r\n\r\nconst initialState = {\r\n\tuser: {},\r\n\ttoken: \"\",\r\n\tisLoggedIn: false,\r\n}\r\n\r\n\r\nconst authReducer = (state = initialState, action) => {\r\n\tconst { type, payload } = action\r\n\r\n\tswitch (type) {\r\n\t\tcase LOGIN:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tuser: payload.user,\r\n\t\t\t\ttoken: payload.token,\r\n\t\t\t\tisLoggedIn: true,\r\n\t\t\t}\r\n\r\n\t\tcase REGISTER:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tuser: payload.user,\r\n\t\t\t\ttoken: payload.token,\r\n\t\t\t\tisLoggedIn: true,\r\n\t\t\t}\r\n\r\n\t\tcase LOGOUT:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tuser: {},\r\n\t\t\t\ttoken: \"\",\r\n\t\t\t\tisLoggedIn: false,\r\n\t\t\t}\r\n\t\tcase UPDATE_PROFILE:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tuser: payload,\r\n\t\t\t}\r\n\r\n\t\tdefault: {\r\n\t\t\treturn state\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport default authReducer","import API from \"./api\"\r\n\r\nconst ChatService = {\r\n\tfetchChats: () => {\r\n\t\treturn API.get(\"/chats\")\r\n\t\t\t.then(({ data }) => {\r\n\t\t\t\treturn data\r\n\t\t\t})\r\n\t\t\t.catch((err) => {\r\n\t\t\t\tthrow err\r\n\t\t\t})\r\n\t},\r\n\r\n\tuploadImage: (data) => {\r\n\t\tconst headers = {\r\n\t\t\theaders: { \"Content-Type\": \"application/x-www-form-urlencoded\" },\r\n\t\t}\r\n\t\treturn API.post(\"/chats/upload-image\", data, headers)\r\n\t\t\t.then(({ data }) => {\r\n\t\t\t\treturn data.url\r\n\t\t\t})\r\n\t\t\t.catch((err) => {\r\n\t\t\t\tthrow err\r\n\t\t\t})\r\n\t},\r\n\r\n\tpaginateMessages: (id, page) => {\r\n\t\treturn API.get(\"/chats/messages\", {\r\n\t\t\tparams: {\r\n\t\t\t\tid,\r\n\t\t\t\tpage,\r\n\t\t\t},\r\n\t\t})\r\n\t\t\t.then(({ data }) => {\r\n\t\t\t\treturn data\r\n\t\t\t})\r\n\t\t\t.catch((err) => {\r\n\t\t\t\tthrow err\r\n\t\t\t})\r\n\t},\r\n\r\n\tsearchUsers: (term) => {\r\n\t\treturn API.get(\"/users/search-users\", {\r\n\t\t\tparams: {\r\n\t\t\t\tterm,\r\n\t\t\t},\r\n\t\t})\r\n\t\t\t.then(({ data }) => {\r\n\t\t\t\treturn data\r\n\t\t\t})\r\n\t\t\t.catch((err) => {\r\n\t\t\t\tthrow err\r\n\t\t\t})\r\n\t},\r\n\r\n\tcreateChat: (partnerId) => {\r\n\t\treturn API.post(\"/chats/create\", { partnerId })\r\n\t\t\t.then(({ data }) => {\r\n\t\t\t\treturn data\r\n\t\t\t})\r\n\t\t\t.catch((err) => {\r\n\t\t\t\tthrow err\r\n\t\t\t})\r\n\t},\r\n\r\n\taddFriendToGroupChat: (userId, chatId) => {\r\n\t\treturn API.post(\"/chats/add-user-to-group\", { userId, chatId })\r\n\t\t\t.then(({ data }) => {\r\n\t\t\t\treturn data\r\n\t\t\t})\r\n\t\t\t.catch((err) => {\r\n\t\t\t\tthrow err\r\n\t\t\t})\r\n\t},\r\n\r\n\tleaveCurrentChat: (chatId) => {\r\n\t\treturn API.post(\"/chats/leave-current-chat\", { chatId })\r\n\t\t\t.then(({ data }) => {\r\n\t\t\t\treturn data\r\n\t\t\t})\r\n\t\t\t.catch((err) => {\r\n\t\t\t\tthrow err\r\n\t\t\t})\r\n\t},\r\n\r\n\tdeleteCurrentChat: (chatId) => {\r\n\t\treturn API.delete(`/chats/${chatId}`)\r\n\t\t\t.then(({ data }) => {\r\n\t\t\t\treturn data\r\n\t\t\t})\r\n\t\t\t.catch((err) => {\r\n\t\t\t\tthrow err\r\n\t\t\t})\r\n\t},\r\n}\r\n\r\nexport default ChatService\r\n","import ChatService from '../../services/chatService'\r\nexport const FETCH_CHATS = 'FETCH_CHATS'\r\nexport const SET_CURRENT_CHAT = 'SET_CURRENT_CHAT'\r\nexport const FRIENDS_ONLINE = 'FRIENDS_ONLINE'\r\nexport const FRIEND_ONLINE = 'FRIEND_ONLINE'\r\nexport const FRIEND_OFFLINE = 'FRIEND_OFFLINE'\r\nexport const SET_SOCKET = 'SET_SOCKET'\r\nexport const RECEIVED_MESSAGE = 'RECEIVED_MESSAGE'\r\nexport const SENDER_TYPING = 'SENDER_TYPING'\r\nexport const PAGINATE_MESSAGES = 'PAGINATE_MESSAGES'\r\nexport const INCREMENT_SCROLL = 'INCREMENT_SCROLL'\r\nexport const CREATE_CHAT = 'CREATE_CHAT'\r\nexport const ADD_USER_TO_GROUP = 'ADD_USER_TO_GROUP'\r\nexport const LEAVE_CURRENT_CHAT = 'LEAVE_CURRENT_CHAT'\r\nexport const DELETE_CURRENT_CHAT = 'DELETE_CURRENT_CHAT'\r\n\r\nexport const fetchChats = () => dispatch => {\r\n    return ChatService.fetchChats()\r\n        .then(data => {\r\n            data.forEach(chat => {\r\n                chat.Users.forEach(user => {\r\n                    user.status = 'offline'\r\n                })\r\n                chat.Messages.reverse()\r\n            })\r\n\r\n            dispatch({ type: FETCH_CHATS, payload: data })\r\n            return data\r\n        })\r\n        .catch(err => {\r\n            throw err\r\n        })\r\n}\r\n\r\nexport const setCurrentChat = (chat) => dispatch => {\r\n    dispatch({ type: SET_CURRENT_CHAT, payload: chat })\r\n}\r\n\r\nexport const onlineFriends = (friends) => dispatch => {\r\n    dispatch({ type: FRIENDS_ONLINE, payload: friends })\r\n}\r\n\r\nexport const onlineFriend = (friend) => dispatch => {\r\n    dispatch({ type: FRIEND_ONLINE, payload: friend })\r\n}\r\n\r\nexport const offlineFriend = (friend) => dispatch => {\r\n    dispatch({ type: FRIEND_OFFLINE, payload: friend })\r\n}\r\n\r\nexport const setSocket = (socket) => dispatch => {\r\n    dispatch({ type: SET_SOCKET, payload: socket })\r\n}\r\n\r\nexport const receivedMessage = (message, userId) => dispatch => {\r\n    dispatch({ type: RECEIVED_MESSAGE, payload: { message, userId } })\r\n}\r\n\r\nexport const senderTyping = (sender) => dispatch => {\r\n    dispatch({ type: SENDER_TYPING, payload: sender })\r\n}\r\n\r\nexport const paginateMessages = (id, page) => dispatch => {\r\n    return ChatService.paginateMessages(id, page)\r\n        .then(({ messages, pagination }) => {\r\n\r\n            if (typeof messages !== 'undefined' && messages.length > 0) {\r\n                messages.reverse()\r\n                const payload = { messages, id, pagination }\r\n                dispatch({ type: PAGINATE_MESSAGES, payload })\r\n                return true\r\n            }\r\n\r\n            return false\r\n        })\r\n        .catch(err => {\r\n            throw err\r\n        })\r\n\r\n}\r\n\r\nexport const incrementScroll = () => dispatch => {\r\n    dispatch({ type: INCREMENT_SCROLL })\r\n}\r\n\r\nexport const createChat = (chat) => dispatch => {\r\n    dispatch({ type: CREATE_CHAT, payload: chat })\r\n}\r\n\r\nexport const addUserToGroup = (group) => dispatch => {\r\n    dispatch({ type: ADD_USER_TO_GROUP, payload: group })\r\n}\r\n\r\nexport const leaveCurrentChat = (data) => dispatch => {\r\n    dispatch({ type: LEAVE_CURRENT_CHAT, payload: data })\r\n}\r\n\r\nexport const deleteCurrentChat = (chatId) => dispatch => {\r\n    dispatch({ type: DELETE_CURRENT_CHAT, payload: chatId })\r\n}","import {\r\n    FETCH_CHATS,\r\n    SET_CURRENT_CHAT,\r\n    FRIENDS_ONLINE,\r\n    FRIEND_ONLINE,\r\n    FRIEND_OFFLINE,\r\n    SET_SOCKET,\r\n    RECEIVED_MESSAGE,\r\n    SENDER_TYPING,\r\n    PAGINATE_MESSAGES,\r\n    INCREMENT_SCROLL,\r\n    CREATE_CHAT,\r\n    ADD_USER_TO_GROUP,\r\n    LEAVE_CURRENT_CHAT,\r\n    DELETE_CURRENT_CHAT\r\n} from '../actions/chat'\r\n\r\nconst initialState = {\r\n    chats: [],\r\n    currentChat: {},\r\n    socket: {},\r\n    newMessage: { chatId: null, seen: null },\r\n    scrollBottom: 0,\r\n    senderTyping: { typing: false }\r\n}\r\n\r\nconst chatReducer = (state = initialState, action) => {\r\n\r\n    const { type, payload } = action\r\n\r\n    switch (type) {\r\n\r\n        case FETCH_CHATS:\r\n            console.log(payload);\r\n            return {\r\n                ...state,\r\n                chats: payload\r\n            }\r\n\r\n        case SET_CURRENT_CHAT:\r\n            return {\r\n                ...state,\r\n                currentChat: payload,\r\n                scrollBottom: state.scrollBottom + 1,\r\n                newMessage: { chatId: null, seen: null }\r\n            }\r\n\r\n        case FRIENDS_ONLINE: {\r\n            const chatsCopy = state.chats.map(chat => {\r\n                return {\r\n                    ...chat,\r\n                    Users: chat.Users.map(user => {\r\n                        if (payload.includes(user.id)) {\r\n                            return {\r\n                                ...user,\r\n                                status: 'online'\r\n                            }\r\n                        }\r\n                        return user\r\n                    })\r\n                }\r\n            })\r\n\r\n            return {\r\n                ...state,\r\n                chats: chatsCopy\r\n            }\r\n        }\r\n\r\n        case FRIEND_ONLINE: {\r\n\r\n            let currentChatCopy = { ...state.currentChat }\r\n\r\n            const chatsCopy = state.chats.map(chat => {\r\n\r\n                const Users = chat.Users.map(user => {\r\n\r\n                    if (user.id === parseInt(payload.id)) {\r\n                        return {\r\n                            ...user,\r\n                            status: 'online'\r\n                        }\r\n                    }\r\n                    return user\r\n                })\r\n\r\n                if (chat.id === currentChatCopy.id) {\r\n                    currentChatCopy = {\r\n                        ...currentChatCopy,\r\n                        Users\r\n                    }\r\n                }\r\n\r\n                return {\r\n                    ...chat,\r\n                    Users\r\n                }\r\n            })\r\n\r\n            return {\r\n                ...state,\r\n                chats: chatsCopy,\r\n                currentChat: currentChatCopy\r\n            }\r\n\r\n        }\r\n\r\n        case FRIEND_OFFLINE: {\r\n\r\n            let currentChatCopy = { ...state.currentChat }\r\n\r\n            const chatsCopy = state.chats.map(chat => {\r\n\r\n                const Users = chat.Users.map(user => {\r\n\r\n                    if (user.id === parseInt(payload.id)) {\r\n                        return {\r\n                            ...user,\r\n                            status: 'offline'\r\n                        }\r\n                    }\r\n                    return user\r\n                })\r\n\r\n                if (chat.id === currentChatCopy.id) {\r\n                    currentChatCopy = {\r\n                        ...currentChatCopy,\r\n                        Users\r\n                    }\r\n                }\r\n\r\n                return {\r\n                    ...chat,\r\n                    Users\r\n                }\r\n            })\r\n\r\n            return {\r\n                ...state,\r\n                chats: chatsCopy,\r\n                currentChat: currentChatCopy\r\n            }\r\n\r\n        }\r\n\r\n        case SET_SOCKET: {\r\n            return {\r\n                ...state,\r\n                socket: payload\r\n            }\r\n        }\r\n\r\n        case RECEIVED_MESSAGE: {\r\n            const { userId, message } = payload\r\n            let currentChatCopy = { ...state.currentChat }\r\n            let newMessage = { ...state.newMessage }\r\n            let scrollBottom = state.scrollBottom\r\n\r\n            const chatsCopy = state.chats.map(chat => {\r\n                if (message.chatId === chat.id) {\r\n\r\n                    if (message.User.id === userId) {\r\n                        scrollBottom++\r\n                    } else {\r\n                        newMessage = {\r\n                            chatId: chat.id,\r\n                            seen: false\r\n                        }\r\n                    }\r\n\r\n                    if (message.chatId === currentChatCopy.id) {\r\n                        currentChatCopy = {\r\n                            ...currentChatCopy,\r\n                            Messages: [...currentChatCopy.Messages, ...[message]]\r\n                        }\r\n                    }\r\n\r\n                    return {\r\n                        ...chat,\r\n                        Messages: [...chat.Messages, ...[message]]\r\n                    }\r\n                }\r\n\r\n                return chat\r\n            })\r\n\r\n            if (scrollBottom === state.scrollBottom) {\r\n                return {\r\n                    ...state,\r\n                    chats: chatsCopy,\r\n                    currentChat: currentChatCopy,\r\n                    newMessage,\r\n                    senderTyping: { typing: false }\r\n                }\r\n            }\r\n\r\n            return {\r\n                ...state,\r\n                chats: chatsCopy,\r\n                currentChat: currentChatCopy,\r\n                newMessage,\r\n                scrollBottom,\r\n                senderTyping: { typing: false }\r\n            }\r\n        }\r\n\r\n        case SENDER_TYPING: {\r\n            if (payload.typing) {\r\n                return {\r\n                    ...state,\r\n                    senderTyping: payload,\r\n                    scrollBottom: state.scrollBottom + 1\r\n                }\r\n            }\r\n\r\n            return {\r\n                ...state,\r\n                senderTyping: payload,\r\n            }\r\n        }\r\n\r\n        case PAGINATE_MESSAGES: {\r\n            const { messages, id, pagination } = payload\r\n\r\n            let currentChatCopy = { ...state.currentChat }\r\n\r\n            const chatsCopy = state.chats.map(chat => {\r\n                if (chat.id === id) {\r\n                    const shifted = [...messages, ...chat.Messages]\r\n\r\n                    currentChatCopy = {\r\n                        ...currentChatCopy,\r\n                        Messages: shifted,\r\n                        Pagination: pagination\r\n                    }\r\n\r\n                    return {\r\n                        ...chat,\r\n                        Messages: shifted,\r\n                        Pagination: pagination\r\n                    }\r\n                }\r\n\r\n                return chat\r\n            })\r\n\r\n            return {\r\n                ...state,\r\n                chats: chatsCopy,\r\n                currentChat: currentChatCopy\r\n            }\r\n        }\r\n\r\n        case INCREMENT_SCROLL:\r\n            return {\r\n                ...state,\r\n                scrollBottom: state.scrollBottom + 1,\r\n                newMessage: { chatId: null, seen: true }\r\n            }\r\n\r\n        case CREATE_CHAT:\r\n            return {\r\n                ...state,\r\n                chats: [...state.chats, ...[payload]]\r\n            }\r\n\r\n        case ADD_USER_TO_GROUP: {\r\n\r\n            const { chat, chatters } = payload\r\n\r\n            let exists = false\r\n\r\n            const chatsCopy = state.chats.map(chatState => {\r\n                if (chat.id === chatState.id) {\r\n\r\n                    exists = true\r\n\r\n                    return {\r\n                        ...chatState,\r\n                        Users: [...chatState.Users, ...chatters]\r\n                    }\r\n                }\r\n\r\n                return chatState\r\n            })\r\n\r\n            if (!exists) chatsCopy.push(chat)\r\n\r\n            let currentChatCopy = { ...state.currentChat }\r\n\r\n            if (Object.keys(currentChatCopy).length > 0) {\r\n                if (chat.id === currentChatCopy.id) {\r\n                    currentChatCopy = {\r\n                        ...state.currentChat,\r\n                        Users: [\r\n                            ...state.currentChat.Users,\r\n                            ...chatters\r\n                        ]\r\n                    }\r\n                }\r\n            }\r\n\r\n            return {\r\n                ...state,\r\n                chats: chatsCopy,\r\n                currentChat: currentChatCopy\r\n            }\r\n        }\r\n\r\n        case LEAVE_CURRENT_CHAT: {\r\n            const { chatId, userId, currentUserId } = payload\r\n\r\n            if (userId === currentUserId) {\r\n\r\n                const chatsCopy = state.chats.filter(chat => chat.id !== chatId)\r\n\r\n                return {\r\n                    ...state,\r\n                    chats: chatsCopy,\r\n                    currentChat: state.currentChat.id === chatId ? {} : state.currentChat\r\n                }\r\n            } else {\r\n\r\n                const chatsCopy = state.chats.map(chat => {\r\n                    if (chatId === chat.id) {\r\n                        return {\r\n                            ...chat,\r\n                            Users: chat.Users.filter(user => user.id !== userId)\r\n                        }\r\n                    }\r\n\r\n                    return chat\r\n                })\r\n\r\n                let currentChatCopy = { ...state.currentChat }\r\n                if (currentChatCopy.id === chatId) {\r\n                    currentChatCopy = {\r\n                        ...currentChatCopy,\r\n                        Users: currentChatCopy.Users.filter(user => user.id !== userId)\r\n                    }\r\n                }\r\n\r\n                return {\r\n                    ...state,\r\n                    chats: chatsCopy,\r\n                    currentChat: currentChatCopy\r\n                }\r\n            }\r\n        }\r\n\r\n        case DELETE_CURRENT_CHAT: {\r\n            return {\r\n                ...state,\r\n                chats: state.chats.filter(chat => chat.id !== payload),\r\n                currentChat: state.currentChat.id === payload ? {} : state.currentChat\r\n            }\r\n        }\r\n\r\n        default: {\r\n            return state\r\n        }\r\n    }\r\n}\r\n\r\nexport default chatReducer","import { combineReducers } from \"redux\"\r\nimport { persistReducer } from \"redux-persist\"\r\nimport storage from \"redux-persist/lib/storage\"\r\nimport authReducer from \"./auth\"\r\nimport chatReducer from \"./chat\"\r\n\r\n\r\nconst persistConfig = {\r\n\tkey: \"user\",\r\n\tstorage,\r\n\twhitelist: [\"auth\"],\r\n}\r\n\r\nconst rootReducer = combineReducers({\r\n\tauth: authReducer,\r\n\tchatReducer,\r\n})\r\n\r\nexport default persistReducer(persistConfig, rootReducer)","import { createStore, applyMiddleware, compose } from \"redux\"\r\nimport thunk from \"redux-thunk\"\r\n\r\nimport { persistStore } from \"redux-persist\"\r\n\r\n\r\nimport rootReducer from \"./reducers\"\r\n\r\n\r\nconst composeEnhancers =\r\n\t(process.env.NODE_ENV === \"development\"\r\n\t\t? window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__\r\n\t\t: null) || compose\r\n\r\nconst enhancer = composeEnhancers(\r\n\tapplyMiddleware(thunk),\r\n\t// other store enhancers if any\r\n)\r\n\r\n\r\nconst store = createStore(rootReducer, enhancer)\r\n\r\nconst persistor = persistStore(store)\r\n\r\nexport  { store, persistor }","import axios from \"axios\"\r\nimport {store} from \"../store/index\"\r\nimport { logout } from \"../store/actions/auth\"\r\n\r\nconst data = JSON.parse(localStorage.getItem(\"persist:user\"))\r\nconst newData = data ? JSON.parse(data.auth) : \"\"\r\n\r\nconst API = axios.create({\r\n\tbaseURL: \"http://127.0.0.1:3005\",\r\n\theaders: {\r\n\t\tAccept: \"application/json\",\r\n\t\tAuthorization: `Bearer ${newData.token || \"\"}`,\r\n\t},\r\n})\r\n\r\n\r\nAPI.interceptors.response.use(\r\n\t(res) => {\r\n\t\treturn res\r\n\t},\r\n\t(err) => {\r\n\t\tif (err.response.status !== 401) {\r\n\t\t\tthrow err\r\n\t\t}\r\n\r\n\t\tif (typeof err.response.data.error.name !== \"undefined\") {\r\n\t\t\tif (err.response.data.error.name === \"TokenExpiredError\") {\r\n\t\t\t\tstore.dispatch(logout())\r\n\t\t\t\tthrow err\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n)\r\n\r\nexport default API\r\n","import API from './api'\r\n\r\nconst AuthService = {\r\n\tlogin: (data) => {\r\n\t\treturn API.post(\"/login\", data)\r\n\t\t\t.then(({ data }) => {\r\n\t\t\t\t// setHeadersAndStorage(data)\r\n\t\t\t\treturn data\r\n\t\t\t})\r\n\t\t\t.catch((err) => {\r\n\t\t\t\tconsole.log(\"Auth service err\", err)\r\n\t\t\t\tthrow err\r\n\t\t\t})\r\n\t},\r\n\r\n\tregister: (data) => {\r\n\t\treturn API.post(\"/register\", data)\r\n\t\t\t.then(({ data }) => {\r\n\t\t\t\t// setHeadersAndStorage(data)\r\n\t\t\t\treturn data\r\n\t\t\t})\r\n\t\t\t.catch((err) => {\r\n\t\t\t\tconsole.log(\"Auth service err\", err)\r\n\t\t\t\tthrow err\r\n\t\t\t})\r\n\t},\r\n\r\n\tlogout: () => {\r\n\t\tAPI.defaults.headers[\"Authorization\"] = \"\"\r\n\t\tlocalStorage.removeItem(\"user\")\r\n\t},\r\n\r\n\tupdateProfile: (data) => {\r\n\t\tconst headers = {\r\n\t\t\theaders: { \"Content-Type\": \"application/x-www-form-urlencoded\" },\r\n\t\t}\r\n\t\treturn API.post(\"/users/update\", data, headers)\r\n\t\t\t.then(({ data }) => {\r\n\t\t\t\tlocalStorage.setItem(\"user\", JSON.stringify(data))\r\n\t\t\t\treturn data\r\n\t\t\t})\r\n\t\t\t.catch((err) => {\r\n\t\t\t\tconsole.log(\"Auth service err\", err)\r\n\t\t\t\tthrow err\r\n\t\t\t})\r\n\t},\r\n}\r\n\r\n\r\nconst setHeadersAndStorage = ({ user, token }) => {\r\n\tAPI.defaults.headers[\"Authorization\"] = `Bearer ${token}`\r\n\tlocalStorage.setItem(\"user\", JSON.stringify({ user, token }))\r\n}\r\n\r\nexport default AuthService","import AuthService from \"../../services/authService\"\r\nimport { LOGIN, REGISTER, LOGOUT, UPDATE_PROFILE } from \"../types/index\"\r\n\r\n\r\nexport const login = (params, history) => (dispatch) => {\r\n\tconsole.log(params);\r\n\treturn AuthService.login(params)\r\n\t\t.then((data) => {\r\n\t\t\tdispatch({ type: LOGIN, payload: data })\r\n\t\t\thistory.push(\"/\")\r\n\t\t})\r\n\t\t.catch((err) => {})\r\n}\r\n\r\nexport const register = (params, history) => (dispatch) => {\r\n\tconsole.log(params);\r\n\treturn AuthService.register(params)\r\n\t\t.then((data) => {\r\n\t\t\tdispatch({ type: REGISTER, payload: data })\r\n\t\t\thistory.push(\"/\")\r\n\t\t})\r\n\t\t.catch((err) => {})\r\n}\r\n\r\n\r\nexport const logout = () => (dispatch) => {\r\n\tAuthService.logout()\r\n\tdispatch({ type: LOGOUT })\r\n}\r\n\r\n\r\nexport const updateProfile = (params) => (dispatch) => {\r\n\treturn AuthService.updateProfile(params)\r\n\t\t.then((data) => {\r\n\t\t\tdispatch({ type: UPDATE_PROFILE, payload: data })\r\n\t\t})\r\n\t\t.catch((err) => {\r\n\t\t\tthrow err\r\n\t\t})\r\n}","var emailRegExp = /^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,6}$/\r\n\r\n\r\nexport class Validators {\r\n\tstatic required(value = \"\") {\r\n\t\treturn value && value.trim()\r\n\t}\r\n\r\n\tstatic minLength(length) {\r\n\t\treturn (value) => {\r\n\t\t\treturn value.length >= length\r\n\t\t}\r\n\t}\r\n\r\n\r\n\tstatic emailRequired(value = \"\") {\r\n\t\treturn new RegExp(emailRegExp).test(value)\r\n\t}\r\n\r\n\t\r\n}\r\n","import React, { useState, useEffect } from 'react'\r\nimport Modal from '../../../components/Modal'\r\nimport Button from '../../../components/Button'\r\nimport Input from '../../../components/Input/Input'\r\n\r\nimport MonthSelect from '../../../components/SelectDate/MonthSelect'\r\nimport YearSelect from \"../../../components/SelectDate/YearSelect\"\r\nimport DaySelect from \"../../../components/SelectDate/DaySelect\"\r\n\r\n\r\nimport { useDispatch } from \"react-redux\"\r\nimport { register } from \"../../../store/actions/auth\"\r\n\r\n\r\nimport { Validators } from '../../../utils/validators'\r\n\r\nimport \"./AuthModal.scss\"\r\n\r\n\r\nconst RegisterModal = ({ active, setActive, history }) => {\r\n\tconst dispatch = useDispatch()\r\n\r\n\tconst [days, setDays] = useState(\"\")\r\n\tconst [years, setYears] = useState(\"\")\r\n\tconst [months, setMonths] = useState(\"\")\r\n\r\n\tconst [formValid, setFormValid] = useState(false)\r\n\tconst [selectValid, setSelectValid] = useState(false)\r\n\r\n\tconst [stateControls, setControls] = useState({\r\n\t\tfirstName: {\r\n\t\t\tvalue: \"\",\r\n\t\t\ttype: \"text\",\r\n\t\t\terrorMessage: \"Введите имя\",\r\n\t\t\tlabel: \"Имя\",\r\n\t\t\tvalid: false,\r\n\t\t\ttouched: false,\r\n\t\t\tvalidation: {\r\n\t\t\t\trequired: Validators.required,\r\n\t\t\t\tminLength: Validators.minLength(1),\r\n\t\t\t},\r\n\t\t},\r\n\t\tlastName: {\r\n\t\t\tvalue: \"\",\r\n\t\t\ttype: \"text\",\r\n\t\t\terrorMessage: \"Введите фамилию\",\r\n\t\t\tlabel: \"Фамилия\",\r\n\t\t\tvalid: false,\r\n\t\t\ttouched: false,\r\n\t\t\tvalidation: {\r\n\t\t\t\trequired: Validators.required,\r\n\t\t\t\tminLength: Validators.minLength(1),\r\n\t\t\t},\r\n\t\t},\r\n\t\temail: {\r\n\t\t\tvalue: \"\",\r\n\t\t\ttype: \"text\",\r\n\t\t\terrorMessage: \"Введите корректный email\",\r\n\t\t\tlabel: \"Введите почту\",\r\n\t\t\tvalid: false,\r\n\t\t\ttouched: false,\r\n\t\t\tvalidation: {\r\n\t\t\t\trequired: Validators.required,\r\n\t\t\t\temail: Validators.emailRequired,\r\n\t\t\t},\r\n\t\t},\r\n\t\tpassword: {\r\n\t\t\tvalue: \"\",\r\n\t\t\ttype: \"password\",\r\n\t\t\tlabel: \"Пароль\",\r\n\t\t\terrorMessage: \"Введите пароль\",\r\n\t\t\tvalid: false,\r\n\t\t\ttouched: false,\r\n\t\t\tvalidation: {\r\n\t\t\t\trequired: Validators.required,\r\n\t\t\t\tminLength: Validators.minLength(4),\r\n\t\t\t},\r\n\t\t},\r\n\t})\r\n\r\n\tuseEffect(() => {\r\n\t\tsetSelectValid(months && days && years)\r\n\t}, [months, days, years])\r\n\r\n\r\n\tconst submitForm = (e) => {\r\n\t\te.preventDefault()\r\n\r\n\t\tconst dateBirth = new Date(years, months - 1, days)\r\n\t\tconst data = Object.keys(stateControls).map((el) => {\r\n\t\t\tconst valueEl = stateControls[el].value\r\n\t\t\treturn {[el]:valueEl}\r\n\t\t}).reduce((prevVal, curr) => {\r\n\t\t\treturn prevVal = {...prevVal, ...curr}\r\n\t\t}, {})\r\n\r\n\t\tdispatch(register({ ...data, dateBirth }, history))\r\n\t}\r\n\r\n\tconst validateControl = (value, validation) => {\r\n\t\tif (!validation) {\r\n\t\t\treturn true\r\n\t\t}\r\n\r\n\t\tlet isValid = true\r\n\r\n\t\tObject.keys(validation).forEach((el) => {\r\n\t\t\tconst valid = validation[el]\r\n\t\t\tisValid = valid(value)\r\n\t\t})\r\n\r\n\t\treturn isValid\r\n\t}\r\n\r\n\tconst changeInputs = (e) => {\r\n\t\tconst { name, value } = e.target\r\n\r\n\t\tconst control = { ...stateControls[name] }\r\n\r\n\t\tcontrol.value = value\r\n\t\tcontrol.touched = true\r\n\t\tcontrol.valid = validateControl(value, control.validation)\r\n\r\n\t\tlet isFormValid = true\r\n\r\n\t\tObject.keys(stateControls).forEach((name) => {\r\n\t\t\tisFormValid = stateControls[name].valid && isFormValid\r\n\t\t})\r\n\r\n\t\tsetFormValid(isFormValid)\r\n\r\n\t\t// setControls({ ...stateControls, ...{ [name]: control } })\r\n\t\tsetControls((prevState) => ({\r\n\t\t\t...prevState,\r\n\t\t\t[name]: control,\r\n\t\t}))\r\n\t}\r\n\r\n\tconst renderInputs = () => {\r\n\t\treturn Object.keys(stateControls).map((controlName, index) => {\r\n\t\t\tconst control = stateControls[controlName]\r\n\t\t\treturn (\r\n\t\t\t\t<Input\r\n\t\t\t\t\tkey={controlName + index}\r\n\t\t\t\t\ttype={control.type}\r\n\t\t\t\t\tvalue={control.value}\r\n\t\t\t\t\tname={controlName}\r\n\t\t\t\t\tvalid={control.valid}\r\n\t\t\t\t\ttouched={control.touched}\r\n\t\t\t\t\tlabel={control.label}\r\n\t\t\t\t\tshouldValidate={!!control.validation}\r\n\t\t\t\t\terrorMessage={control.errorMessage}\r\n\t\t\t\t\tonChange={changeInputs}\r\n\t\t\t\t/>\r\n\t\t\t)\r\n\t\t})\r\n\t}\r\n\r\n\treturn (\r\n\t\t<Modal active={active} setActive={setActive} auth={true}>\r\n\t\t\t<div className=\"auth\">\r\n\t\t\t\t<div className=\"auth__box\">\r\n\t\t\t\t\t<div className=\"auth__box-create\">\r\n\t\t\t\t\t\t<span>Создайте учетную запись</span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<form className=\"auth__form\">\r\n\t\t\t\t\t\t{renderInputs()}\r\n\r\n\t\t\t\t\t\t<div className=\"auth__select\">\r\n\t\t\t\t\t\t\t<div className=\"auth__item\">\r\n\t\t\t\t\t\t\t\t<span>Месяц</span>\r\n\t\t\t\t\t\t\t\t<MonthSelect\r\n\t\t\t\t\t\t\t\t\tclassName=\"months\"\r\n\t\t\t\t\t\t\t\t\tvalue={months}\r\n\t\t\t\t\t\t\t\t\tonChange={(v) => {\r\n\t\t\t\t\t\t\t\t\t\tsetMonths(v)\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t<label></label>\r\n\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t<div className=\"auth__item\">\r\n\t\t\t\t\t\t\t\t<span>День</span>\r\n\t\t\t\t\t\t\t\t<DaySelect\r\n\t\t\t\t\t\t\t\t\tclassName=\"days\"\r\n\t\t\t\t\t\t\t\t\ty={years}\r\n\t\t\t\t\t\t\t\t\tm={months}\r\n\t\t\t\t\t\t\t\t\tvalue={days}\r\n\t\t\t\t\t\t\t\t\tonChange={(v) => {\r\n\t\t\t\t\t\t\t\t\t\tsetDays(v)\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t<label></label>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div className=\"auth__item\">\r\n\t\t\t\t\t\t\t\t<YearSelect\r\n\t\t\t\t\t\t\t\t\tclassName=\"years\"\r\n\t\t\t\t\t\t\t\t\tvalue={years}\r\n\t\t\t\t\t\t\t\t\tstart={new Date().getFullYear() - 125}\r\n\t\t\t\t\t\t\t\t\tend={new Date().getFullYear()}\r\n\t\t\t\t\t\t\t\t\tonChange={(v) => {\r\n\t\t\t\t\t\t\t\t\t\tsetYears(v)\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t<span>Год</span>\r\n\t\t\t\t\t\t\t\t<label></label>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\ttext=\"Зарегистрироваться\"\r\n\t\t\t\t\t\t\ttype=\"primary\"\r\n\t\t\t\t\t\t\tcls=\"fullWidth\"\r\n\t\t\t\t\t\t\tonClick={submitForm}\r\n\t\t\t\t\t\t\tdisabled={!formValid || !selectValid}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</form>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</Modal>\r\n\t)\r\n}\r\n\r\n\r\nexport default RegisterModal;","import React, { useEffect, useState } from 'react'\r\n\r\nimport { useDispatch } from \"react-redux\"\r\n\r\n\r\nimport Modal from '../../../components/Modal'\r\nimport Input from \"../../../components/Input/Input\"\r\nimport Button from \"../../../components/Button\"\r\n\r\n\r\nimport { Validators } from \"../../../utils/validators\"\r\n\r\n\r\nimport { login } from \"../../../store/actions/auth\"\r\n\r\n\r\nimport \"./AuthModal.scss\"\r\n\r\n\r\nconst LoginModal = ({ active, setActive, history }) => {\r\n\tconst dispatch = useDispatch()\r\n\r\n\tconst [formValid, setFormValid] = useState(false)\r\n\r\n\tconst [stateControls, setControls] = useState({\r\n\t\temail: {\r\n\t\t\tvalue: \"\",\r\n\t\t\ttype: \"text\",\r\n\t\t\terrorMessage: \"Введите корректный email\",\r\n\t\t\tlabel: \"Введите почту\",\r\n\t\t\tvalid: false,\r\n\t\t\ttouched: false,\r\n\t\t\tvalidation: {\r\n\t\t\t\trequired: Validators.required,\r\n\t\t\t\temail: Validators.emailRequired,\r\n\t\t\t},\r\n\t\t},\r\n\t\tpassword: {\r\n\t\t\tvalue: \"\",\r\n\t\t\ttype: \"password\",\r\n\t\t\tlabel: \"Пароль\",\r\n\t\t\terrorMessage: \"Введите пароль\",\r\n\t\t\tvalid: false,\r\n\t\t\ttouched: false,\r\n\t\t\tvalidation: {\r\n\t\t\t\trequired: Validators.required,\r\n\t\t\t\tminLength: Validators.minLength(4),\r\n\t\t\t},\r\n\t\t},\r\n\t})\r\n\r\n\r\n\tconst submitForm = (e) => {\r\n\t\te.preventDefault()\r\n\r\n\r\n\tconst data = Object.keys(stateControls)\r\n\t\t.map((el) => {\r\n\t\t\tconst valueEl = stateControls[el].value\r\n\t\t\treturn { [el]: valueEl }\r\n\t\t})\r\n\t\t.reduce((prevVal, curr) => {\r\n\t\t\treturn (prevVal = { ...prevVal, ...curr })\r\n\t\t}, {})\r\n\r\n\t\tdispatch(login({ ...data }, history))\r\n\t}\r\n\r\n\tconst validateControl = (value, validation) => {\r\n\t\tif (!validation) {\r\n\t\t\treturn true\r\n\t\t}\r\n\r\n\t\tlet isValid = true\r\n\r\n\t\tObject.keys(validation).forEach((el) => {\r\n\t\t\tconst valid = validation[el]\r\n\t\t\tisValid = valid(value)\r\n\t\t})\r\n\r\n\t\treturn isValid\r\n\t}\r\n\r\n\tconst changeInputs = (e) => {\r\n\t\tconst { name, value } = e.target\r\n\r\n\t\tconst control = { ...stateControls[name] }\r\n\r\n\t\tcontrol.value = value\r\n\t\tcontrol.touched = true\r\n\t\tcontrol.valid = validateControl(value, control.validation)\r\n\r\n\t\tlet isFormValid = true\r\n\r\n\t\tObject.keys(stateControls).forEach((name) => {\r\n\t\t\tisFormValid = stateControls[name].valid && isFormValid\r\n\t\t})\r\n\r\n\t\tsetFormValid(isFormValid)\r\n\r\n\t\tsetControls((prevState) => ({\r\n\t\t\t...prevState,\r\n\t\t\t[name]: control,\r\n\t\t}))\r\n\t}\r\n\r\n\tconst renderInputs = () => {\r\n\t\treturn Object.keys(stateControls).map((controlName, index) => {\r\n\t\t\tconst control = stateControls[controlName]\r\n\t\t\treturn (\r\n\t\t\t\t<Input\r\n\t\t\t\t\tkey={controlName + index}\r\n\t\t\t\t\ttype={control.type}\r\n\t\t\t\t\tvalue={control.value}\r\n\t\t\t\t\tname={controlName}\r\n\t\t\t\t\tvalid={control.valid}\r\n\t\t\t\t\ttouched={control.touched}\r\n\t\t\t\t\tlabel={control.label}\r\n\t\t\t\t\tshouldValidate={!!control.validation}\r\n\t\t\t\t\terrorMessage={control.errorMessage}\r\n\t\t\t\t\tonChange={changeInputs}\r\n\t\t\t\t/>\r\n\t\t\t)\r\n\t\t})\r\n\t}\r\n\r\n\treturn (\r\n\t\t<Modal active={active} setActive={setActive} auth={true}>\r\n\t\t\t<div className=\"auth\">\r\n\t\t\t\t<div className=\"auth__box\">\r\n\t\t\t\t\t<div className=\"auth__box-create\">\r\n\t\t\t\t\t\t<span>Войдите в учетную запись</span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<form className=\"auth__form\">\r\n\t\t\t\t\t\t{renderInputs()}\r\n\r\n\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\ttext=\"Войти\"\r\n\t\t\t\t\t\t\ttype=\"primary\"\r\n\t\t\t\t\t\t\tcls=\"fullWidth\"\r\n\t\t\t\t\t\t\tonClick={submitForm}\r\n\t\t\t\t\t\t\tdisabled={!formValid}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</form>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</Modal>\r\n\t)\r\n}\r\n\r\nexport default LoginModal","import React, { useEffect, useState } from \"react\"\r\nimport { useSelector } from \"react-redux\"\r\nimport { Redirect } from \"react-router-dom\"\r\n\r\nimport Logo from '../../components/Logo'\r\nimport Button from \"../../components/Button\"\r\n\r\nimport RegisterModal from \"./components/RegisterModal\"\r\nimport LoginModal from \"./components/LoginModal\"\r\n\r\nimport \"./Auth.scss\"\r\n\r\n\r\nexport const Auth = ({ history }) => {\r\n\t\r\n\tconst isLoggedIn = useSelector((state) => state.auth.isLoggedIn)\r\n\r\n\tconst [registerModalActive, setRegisterModalActive] = useState(false)\r\n\tconst [loginModalActive, setLoginModalActive] = useState(false)\r\n\r\n\r\n\t\r\n\tuseEffect(() => {\r\n\t\tif (isLoggedIn) {\r\n\t\t\t<Redirect to=\"/\" />\r\n\t\t}\r\n\t}, [history, isLoggedIn])\r\n\t\r\n\r\n  return (\r\n\t\t<div className=\"auth-container\">\r\n\t\t\t<div className=\"auth-container__left\">\r\n\t\t\t\t<Logo cls=\"logo logo--big\" />\r\n\r\n\t\t\t\t<ul className=\"auth-container__left-about\">\r\n\t\t\t\t\t<li className=\"auth-container__left-item\">\r\n\t\t\t\t\t\t<h6 className=\"auth-container__left-title\">\r\n\t\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\t\tclass=\"svg-el auth-container__left-title-el\"\r\n\t\t\t\t\t\t\t\tfocusable=\"false\"\r\n\t\t\t\t\t\t\t\tviewBox=\"0 0 24 24\"\r\n\t\t\t\t\t\t\t\taria-hidden=\"true\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<path d=\"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z\"></path>\r\n\t\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t\t\tЧитайте о том, что вам интересно.\r\n\t\t\t\t\t\t</h6>\r\n\t\t\t\t\t</li>\r\n\r\n\t\t\t\t\t<li className=\"auth-container__left-item\">\r\n\t\t\t\t\t\t<h6 className=\"auth-container__left-title\">\r\n\t\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\t\tclass=\"svg-el auth-container__left-title-el\"\r\n\t\t\t\t\t\t\t\tfocusable=\"false\"\r\n\t\t\t\t\t\t\t\tviewBox=\"0 0 24 24\"\r\n\t\t\t\t\t\t\t\taria-hidden=\"true\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<path d=\"M16.5 13c-1.2 0-3.07.34-4.5 1-1.43-.67-3.3-1-4.5-1C5.33 13 1 14.08 1 16.25V19h22v-2.75c0-2.17-4.33-3.25-6.5-3.25zm-4 4.5h-10v-1.25c0-.54 2.56-1.75 5-1.75s5 1.21 5 1.75v1.25zm9 0H14v-1.25c0-.46-.2-.86-.52-1.22.88-.3 1.96-.53 3.02-.53 2.44 0 5 1.21 5 1.75v1.25zM7.5 12c1.93 0 3.5-1.57 3.5-3.5S9.43 5 7.5 5 4 6.57 4 8.5 5.57 12 7.5 12zm0-5.5c1.1 0 2 .9 2 2s-.9 2-2 2-2-.9-2-2 .9-2 2-2zm9 5.5c1.93 0 3.5-1.57 3.5-3.5S18.43 5 16.5 5 13 6.57 13 8.5s1.57 3.5 3.5 3.5zm0-5.5c1.1 0 2 .9 2 2s-.9 2-2 2-2-.9-2-2 .9-2 2-2z\"></path>\r\n\t\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t\t\tУзнайте, о чем говорят в мире.\r\n\t\t\t\t\t\t</h6>\r\n\t\t\t\t\t</li>\r\n\r\n\t\t\t\t\t<li className=\"auth-container__left-item\">\r\n\t\t\t\t\t\t<h6 className=\"auth-container__left-title\">\r\n\t\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\t\tclass=\"svg-el auth-container__left-title-el\"\r\n\t\t\t\t\t\t\t\tfocusable=\"false\"\r\n\t\t\t\t\t\t\t\tviewBox=\"0 0 24 24\"\r\n\t\t\t\t\t\t\t\taria-hidden=\"true\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<path d=\"M20 17.17L18.83 16H4V4h16v13.17zM20 2H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h14l4 4V4c0-1.1-.9-2-2-2z\"></path>\r\n\t\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t\t\tПрисоединяйтесь к общению.\r\n\t\t\t\t\t\t</h6>\r\n\t\t\t\t\t</li>\r\n\t\t\t\t</ul>\r\n\t\t\t</div>\r\n\r\n\t\t\t<div className=\"auth-container__right\">\r\n\t\t\t\t<div className=\"auth-container__right-loginSide\">\r\n\t\t\t\t\t<Logo cls=\"logo frontSvg\"></Logo>\r\n\r\n\t\t\t\t\t<h4>Узнайте, что происходит в мире прямо сейчас</h4>\r\n\r\n\t\t\t\t\t<p>Присоединяйтесь к Твиттеру прямо сейчас!</p>\r\n\r\n\t\t\t\t\t<br />\r\n\r\n\t\t\t\t\t<Button\r\n\t\t\t\t\t\ttext=\"Зарегистрироваться\"\r\n\t\t\t\t\t\ttype=\"primary\"\r\n\t\t\t\t\t\tcls=\"fullWidth mb-20\"\r\n\t\t\t\t\t\tonClick={() => setRegisterModalActive(true)}\r\n\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t<Button\r\n\t\t\t\t\t\ttext=\"Войти\"\r\n\t\t\t\t\t\ttype=\"outlined\"\r\n\t\t\t\t\t\tcls=\"fullWidth\"\r\n\t\t\t\t\t\tonClick={() => setLoginModalActive(true)}\r\n\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t{registerModalActive && (\r\n\t\t\t\t\t\t<RegisterModal\r\n\t\t\t\t\t\t\thistory={history}\r\n\t\t\t\t\t\t\tactive={registerModalActive}\r\n\t\t\t\t\t\t\tsetActive={setRegisterModalActive}\r\n\t\t\t\t\t\t></RegisterModal>\r\n\t\t\t\t\t)}\r\n\r\n\t\t\t\t\t{loginModalActive && (\r\n\t\t\t\t\t\t<LoginModal\r\n\t\t\t\t\t\t\thistory={history}\r\n\t\t\t\t\t\t\tactive={loginModalActive}\r\n\t\t\t\t\t\t\tsetActive={setLoginModalActive}\r\n\t\t\t\t\t\t></LoginModal>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import { useEffect } from 'react'\r\nimport socketIOClient from 'socket.io-client'\r\nimport { fetchChats, onlineFriends, onlineFriend, offlineFriend, setSocket, receivedMessage, senderTyping, createChat, addUserToGroup, leaveCurrentChat, deleteCurrentChat } from '../../../store/actions/chat'\r\n\r\nfunction useSocket(user, dispatch) {\r\n\r\n    useEffect(() => {\r\n\r\n        dispatch(fetchChats())\r\n            .then(res => {\r\n\r\n                const socket = socketIOClient.connect('http://127.0.0.1:3005')\r\n\r\n                \r\n                dispatch(setSocket(socket))\r\n\r\n                socket.emit('join', user)\r\n\r\n                socket.on('typing', (sender) => {\r\n                    dispatch(senderTyping(sender))\r\n                })\r\n\r\n                socket.on('friends', (friends) => {\r\n                    console.log(\"Friends\", friends);\r\n                    dispatch(onlineFriends(friends))\r\n                })\r\n\r\n                socket.on('online', (user) => {\r\n                    dispatch(onlineFriend(user))\r\n                    console.log(\"Online\", user);\r\n                })\r\n\r\n                socket.on('offline', (user) => {\r\n                    dispatch(offlineFriend(user))\r\n                    console.log(\"Offline\", user);\r\n                })\r\n\r\n                socket.on('received', (message) => {\r\n                    dispatch(receivedMessage(message, user.id))\r\n                })\r\n\r\n                socket.on('new-chat', (chat) => {\r\n                    dispatch(createChat(chat))\r\n                })\r\n\r\n                socket.on('added-user-to-group', (group) => {\r\n                    dispatch(addUserToGroup(group))\r\n                })\r\n\r\n                socket.on('remove-user-from-chat', (data) => {\r\n                    data.currentUserId = user.id\r\n                    dispatch(leaveCurrentChat(data))\r\n                })\r\n\r\n                socket.on('delete-chat', (chatId) => {\r\n                    dispatch(deleteCurrentChat(chatId))\r\n                })\r\n\r\n                console.log(res)\r\n            })\r\n            .catch(err => console.log(err))\r\n    }, [dispatch])\r\n\r\n}\r\n\r\nexport default useSocket","import { useCallback, useRef } from \"react\"\r\n\r\nexport default function useDebounce(callback, delay) {\r\n\tconst timer = useRef()\r\n\r\n\tconst debouncedCallback = useCallback(\r\n\t\t(...args) => {\r\n\t\t\tif (timer.current) {\r\n\t\t\t\tclearTimeout(timer.current)\r\n\t\t\t}\r\n\t\t\ttimer.current = setTimeout(() => {\r\n\t\t\t\tcallback(...args)\r\n\t\t\t}, delay)\r\n\t\t},\r\n\t\t[callback, delay]\r\n\t)\r\n\r\n\treturn debouncedCallback\r\n}\r\n","export default __webpack_public_path__ + \"static/media/searchIcon.507667a6.svg\";","import React, { useState, Fragment } from \"react\"\r\n\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\"\r\nimport { useSelector } from \"react-redux\"\r\nimport ChatService from \"../../../../services/chatService\"\r\nimport useDebounce from \"../../hooks/useDebounce\"\r\n\r\nimport Modal from \"../../../../components/Modal\"\r\nimport searchIcon from \"../../../../assets/images/searchIcon.svg\"\r\nimport Button from \"../../../../components/Button\"\r\n\r\n\r\nimport \"./ChatHeader.scss\"\r\n\r\nconst ChatHeader = ({chat}) => {\r\n\r\n\r\n\tconst [showChatOptions, setShowChatOptions] = useState(false)\r\n\tconst [showAddFriendModal, setShowAddFriendModal] = useState(false)\r\n\tconst [showLeaveChatModal, setShowLeaveChatModal] = useState(false)\r\n\tconst [showDeleteChatModal, setShowDeleteChatModal] = useState(false)\r\n\tconst [suggestions, setSuggestions] = useState([])\r\n\r\n\tconst socket = useSelector((state) => state.chatReducer.socket)\r\n\r\n\tconst searchFriends = (e) => {\r\n\t\tChatService.searchUsers(e.target.value).then((res) =>\r\n\t\t\tsetSuggestions(res)\r\n\t\t)\r\n\t}\r\n\r\n\tconst addNewFriend = (id) => {\r\n\t\tChatService.addFriendToGroupChat(id, chat.id)\r\n\t\t\t.then((data) => {\r\n\t\t\t\tsocket.emit(\"add-user-to-group\", data)\r\n\t\t\t\tsetShowAddFriendModal(false)\r\n\t\t\t})\r\n\t\t\t.catch((err) => console.log(err))\r\n\t}\r\n\r\n\r\n\tconst debouncedSearch = useDebounce(searchFriends, 650)\r\n\r\n\r\n\tconst leaveChat = () => {\r\n\t\tChatService.leaveCurrentChat(chat.id)\r\n\t\t\t.then((data) => {\r\n\t\t\t\tsocket.emit(\"leave-current-chat\", data)\r\n\t\t\t})\r\n\t\t\t.catch((err) => console.log(err))\r\n\t}\r\n\r\n\tconst deleteChat = () => {\r\n\t\tChatService.deleteCurrentChat(chat.id).then((data) => {\r\n\t\t\tsocket.emit(\"delete-chat\", data)\r\n\t\t})\r\n\t}\r\n\t\r\n\treturn (\r\n\t\t<Fragment>\r\n\t\t\t<div className=\"chatter\">\r\n\t\t\t\t{chat.Users.map((user) => {\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<div className=\"chatter__info\" key={user.id}>\r\n\t\t\t\t\t\t\t<h3>\r\n\t\t\t\t\t\t\t\t{user.firstName} {user.lastName}\r\n\t\t\t\t\t\t\t</h3>\r\n\t\t\t\t\t\t\t<div className=\"chatter__info-status\">\r\n\t\t\t\t\t\t\t\t<span\r\n\t\t\t\t\t\t\t\t\tclassName={`online-status ${\r\n\t\t\t\t\t\t\t\t\t\tuser.status === \"online\" ? \"online\" : \"offline\"\r\n\t\t\t\t\t\t\t\t\t}`}\r\n\t\t\t\t\t\t\t\t></span>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t)\r\n\t\t\t\t})}\r\n\t\t\t</div>\r\n\r\n\t\t\t<FontAwesomeIcon\r\n\t\t\t\tonClick={() => setShowChatOptions(!showChatOptions)}\r\n\t\t\t\ticon={[\"fas\", \"ellipsis-v\"]}\r\n\t\t\t\tclassName=\"fa-icon\"\r\n\t\t\t/>\r\n\r\n\t\t\t{showChatOptions ? (\r\n\t\t\t\t<div id=\"wrapper-overflow\" onClick={() => setShowChatOptions(false)}>\r\n\t\t\t\t\t<div id=\"settings\">\r\n\t\t\t\t\t\t<div onClick={() => setShowAddFriendModal(true)}>\r\n\t\t\t\t\t\t\t<FontAwesomeIcon\r\n\t\t\t\t\t\t\t\ticon={[\"fas\", \"user-plus\"]}\r\n\t\t\t\t\t\t\t\tclassName=\"fa-icon\"\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t<p>Add user to chat</p>\r\n\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t{chat.type === \"group\" ? (\r\n\t\t\t\t\t\t\t<div onClick={() => leaveChat()}>\r\n\t\t\t\t\t\t\t\t<FontAwesomeIcon\r\n\t\t\t\t\t\t\t\t\ticon={[\"fas\", \"sign-out-alt\"]}\r\n\t\t\t\t\t\t\t\t\tclassName=\"fa-icon\"\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t<p>Leave chat</p>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t) : null}\r\n\r\n\t\t\t\t\t\t{chat.type === \"dual\" ? (\r\n\t\t\t\t\t\t\t<div onClick={() => deleteChat()}>\r\n\t\t\t\t\t\t\t\t<FontAwesomeIcon icon={[\"fas\", \"trash\"]} className=\"fa-icon\" />\r\n\t\t\t\t\t\t\t\t<p>Delete chat</p>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t) : null}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t) : null}\r\n\r\n\t\t\t{showAddFriendModal && (\r\n\t\t\t\t<Modal\r\n\t\t\t\t\tactive={showAddFriendModal}\r\n\t\t\t\t\tsetActive={setShowAddFriendModal}\r\n\t\t\t\t\tauth={false}\r\n\t\t\t\t>\r\n\t\t\t\t\t<div className=\"modal__bottom-image-about--left\">\r\n\t\t\t\t\t\t<img src={searchIcon}></img>\r\n\t\t\t\t\t\t<span className=\"m-0\">Add friend to group chat</span>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<div className=\"modal__bottom-info\">\r\n\t\t\t\t\t\t<div className=\"modal__text\">\r\n\t\t\t\t\t\t\t<div className=\"modal__text-top\">\r\n\t\t\t\t\t\t\t\t<span>Find friends by typing their name bellow:</span>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div className=\"modal__text-bottom\">\r\n\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\tonInput={(e) => debouncedSearch(e)}\r\n\t\t\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\t\t\tplaceholder=\"Search...\"\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"modal__bottom-children\">\r\n\t\t\t\t\t\t\t<div id=\"suggestions\">\r\n\t\t\t\t\t\t\t\t{suggestions.map((user) => {\r\n\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t<div key={user.id} className=\"suggestion\">\r\n\t\t\t\t\t\t\t\t\t\t\t<span className=\"m-0\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<img src={`${user.avatar}`} />\r\n\t\t\t\t\t\t\t\t\t\t\t\t{user.firstName} {user.lastName}\r\n\t\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\t\t\t\ttype=\"outlined\"\r\n\t\t\t\t\t\t\t\t\t\t\t\ttext=\"ADD\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tcls={\"search-btn\"}\r\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => addNewFriend(user.id)}\r\n\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</Modal>\r\n\t\t\t)}\r\n\t\t</Fragment>\r\n\t)\r\n}\r\n\r\nexport default ChatHeader","import React from 'react'\r\n\r\n\r\nimport \"./Message.scss\"\r\n\r\nconst Message = ({ user, chat, index, message }) => {\r\n\r\n\tconst determineMargin = () => {\r\n\t\tif (index + 1 === chat.Messages.length) return\r\n\r\n\t\treturn message.fromUserId === chat.Messages[index + 1].fromUserId\r\n\t\t\t? \"mb-5\"\r\n\t\t\t: \"mb-10\"\r\n\t}\r\n\t\r\n    return (\r\n\t\t\t<div\r\n\t\t\t\tclassName={`message ${determineMargin()} ${\r\n\t\t\t\t\tmessage.fromUserId === user.id ? \"creator\" : \"\"\r\n\t\t\t\t}`}\r\n\t\t\t>\r\n\t\t\t\t<div\r\n\t\t\t\t\tclassName={message.fromUserId === user.id ? \"owner\" : \"other-person\"}\r\n\t\t\t\t>\r\n\t\t\t\t\t{message.fromUserId !== user.id ? (\r\n\t\t\t\t\t\t<h6 className=\"m-0\">\r\n\t\t\t\t\t\t\t{message.User.firstName} {message.User.lastName}\r\n\t\t\t\t\t\t</h6>\r\n\t\t\t\t\t) : null}{\" \"}\r\n\t\t\t\t\t{message.type === \"text\" ? (\r\n\t\t\t\t\t\t<p className=\"m-0\">{message.message}</p>\r\n\t\t\t\t\t) : (\r\n\t\t\t\t\t\t<img src={message.message} alt=\"User upload\" />\r\n\t\t\t\t\t)}\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t)\r\n}\r\n\r\n\r\nexport default Message","import React, { useEffect, useRef, useState, Fragment } from \"react\"\r\nimport { useSelector, useDispatch } from \"react-redux\"\r\n\r\nimport { paginateMessages } from \"../../../../store/actions/chat\"\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\"\r\n\r\nimport Message from \"../Message/Message\"\r\n\r\nimport \"./MessageBox.scss\"\r\n\r\nconst MessageBox = ({ chat }) => {\r\n\tconst dispatch = useDispatch()\r\n\r\n\tconst user = useSelector((state) => state.auth.user)\r\n\tconst scrollBottom = useSelector((state) => state.chatReducer.scrollBottom)\r\n\tconst senderTyping = useSelector((state) => state.chatReducer.senderTyping)\r\n\tconst [loading, setLoading] = useState(false)\r\n\tconst [scrollUp, setScrollUp] = useState(0)\r\n\r\n\r\n\tconst msgBox = useRef()\r\n\r\n\tconst scrollManual = (value) => {\r\n\t\tmsgBox.current.scrollTop = value\r\n\t}\r\n\r\n\r\n\tconst handleInfiniteScroll = (e) => {\r\n\t\tif (e.target.scrollTop === 0) {\r\n\t\t\tsetLoading(true)\r\n\t\t\tconst pagination = chat.Pagination\r\n\t\t\tconst page = typeof pagination === \"undefined\" ? 1 : pagination.page\r\n\r\n\t\t\tdispatch(paginateMessages(chat.id, parseInt(page) + 1))\r\n\t\t\t\t.then((res) => {\r\n\t\t\t\t\tif (res) {\r\n\t\t\t\t\t\tsetScrollUp(scrollUp + 1)\r\n\t\t\t\t\t}\r\n\t\t\t\t\tsetLoading(false)\r\n\t\t\t\t})\r\n\t\t\t\t.catch((err) => {\r\n\t\t\t\t\tsetLoading(false)\r\n\t\t\t\t})\r\n\t\t}\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tsetTimeout(() => {\r\n\t\t\tscrollManual(Math.ceil(msgBox.current.scrollHeight * 0.1))\r\n\t\t}, 100)\r\n\t}, [scrollUp])\r\n\r\n\tuseEffect(() => {\r\n\t\tif (\r\n\t\t\tsenderTyping.typing &&\r\n\t\t\tmsgBox.current.scrollTop > msgBox.current.scrollHeight * 0.3\r\n\t\t) {\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\tscrollManual(msgBox.current.scrollHeight)\r\n\t\t\t}, 100)\r\n\t\t}\r\n\t}, [senderTyping])\r\n\r\n\tuseEffect(() => {\r\n\t\tif (!senderTyping.typing) {\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\tscrollManual(msgBox.current.scrollHeight)\r\n\t\t\t}, 100)\r\n\t\t}\r\n\t}, [scrollBottom])\r\n\t\r\n    return (\r\n\t\t\t<div onScroll={handleInfiniteScroll} className=\"msg-box\" id=\"msg-box\" ref={msgBox}>\r\n\t\t\t\t{loading ? (\r\n\t\t\t\t\t<p className=\"loader m-0\">\r\n\t\t\t\t\t\t<FontAwesomeIcon icon=\"spinner\" className=\"fa-spin\" />\r\n\t\t\t\t\t</p>\r\n\t\t\t\t) : null}\r\n\t\t\t\t{chat.Messages.map((message, index) => {\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<Fragment>\r\n\t\t\t\t\t\t\t<Message\r\n\t\t\t\t\t\t\t\tuser={user}\r\n\t\t\t\t\t\t\t\tchat={chat}\r\n\t\t\t\t\t\t\t\tmessage={message}\r\n\t\t\t\t\t\t\t\tindex={index}\r\n\t\t\t\t\t\t\t\tkey={message.id}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</Fragment>\r\n\t\t\t\t\t)\r\n\t\t\t\t})}\r\n\t\t\t\t{senderTyping.typing && senderTyping.chatId === chat.id ? (\r\n\t\t\t\t\t<div className=\"message mt-5p\">\r\n\t\t\t\t\t\t<div className=\"other-person\">\r\n\t\t\t\t\t\t\t<p className=\"m-0\">\r\n\t\t\t\t\t\t\t\t{senderTyping.fromUser.firstName}{\" \"}\r\n\t\t\t\t\t\t\t\t{senderTyping.fromUser.lastName}...\r\n\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t) : null}\r\n\t\t\t</div>\r\n\t\t)\r\n}\r\n\r\nexport default MessageBox\r\n","import React, { useState, useRef, useEffect } from \"react\"\r\nimport { useSelector, useDispatch } from \"react-redux\"\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\"\r\n\r\nimport ChatService from \"../../../../services/chatService\"\r\nimport { Picker } from \"emoji-mart\"\r\nimport { incrementScroll } from \"../../../../store/actions/chat\"\r\n\r\nimport \"emoji-mart/css/emoji-mart.css\"\r\n\r\nimport \"./MessageInput.scss\"\r\n\r\nconst MessageInput = ({chat}) => {\r\n\tconst dispatch = useDispatch()\r\n\tconst user = useSelector((state) => state.auth.user)\r\n\tconst socket = useSelector((state) => state.chatReducer.socket)\r\n\tconst newMessage = useSelector((state) => state.chatReducer.newMessage)\r\n\r\n\tconst fileUpload = useRef()\r\n\tconst msgInput = useRef()\r\n\r\n\tconst [message, setMessage] = useState(\"\")\r\n\tconst [image, setImage] = useState(\"\")\r\n\tconst [showEmojiPicker, setShowEmojiPicker] = useState(false)\r\n\tconst [showNewMessageNotification, setShowNewMessageNotification] =\r\n\t\tuseState(false)\r\n\r\n\tconst handleKeyDown = (e, imageUpload) => {\r\n\t\tif (e.key === \"Enter\") {\r\n\t\t\te.preventDefault()\r\n\t\t\tsendMessage(imageUpload)\r\n\t\t} \r\n\t}\r\n\r\n\tconst sendMessage = (imageUpload) => {\r\n\t\tif (message.length < 1 && !imageUpload) return\r\n\r\n\t\tconst msg = {\r\n\t\t\ttype: imageUpload ? \"image\" : \"text\",\r\n\t\t\tfromUser: user,\r\n\t\t\ttoUserId: chat.Users.map((user) => user.id),\r\n\t\t\tchatId: chat.id,\r\n\t\t\tmessage: imageUpload ? imageUpload : message,\r\n\t\t}\r\n\r\n\t\tsetMessage(\"\")\r\n\t\tsetImage(\"\")\r\n\t\tsetShowEmojiPicker(false)\r\n\t\tmsgInput.current.value = \"\"\r\n\r\n\t\t// send message with socket\r\n\t\tsocket.emit(\"message\", msg)\r\n\t}\r\n\r\n\tconst handleMessage = (e) => {\r\n\t\tconst value = e.target.value\r\n\t\tsetMessage(value)\r\n\r\n\t\tconst receiver = {\r\n\t\t\tchatId: chat.id,\r\n\t\t\tfromUser: user,\r\n\t\t\ttoUserId: chat.Users.map((user) => user.id),\r\n\t\t}\r\n\r\n\t\tif (value.length === 1) {\r\n\t\t\treceiver.typing = true\r\n\t\t\tsocket.emit(\"typing\", receiver)\r\n\t\t}\r\n\r\n\t\tif (value.length === 0) {\r\n\t\t\treceiver.typing = false\r\n\t\t\tsocket.emit(\"typing\", receiver)\r\n\t\t}\r\n\r\n\t\t// notify other users that this user is typing something\r\n\t}\r\n\r\n\tconst handleImageUpload = () => {\r\n\t\tconst formData = new FormData()\r\n\t\tformData.append(\"id\", chat.id)\r\n\t\tformData.append(\"image\", image)\r\n\r\n\t\tChatService.uploadImage(formData)\r\n\t\t\t.then((image) => {\r\n\t\t\t\tsendMessage(image)\r\n\t\t\t})\r\n\t\t\t.catch((err) => console.log(err))\r\n\t}\r\n\r\n\tconst selectEmoji = (emoji) => {\r\n\t\tconst startPosition = msgInput.current.selectionStart\r\n\t\tconst endPosition = msgInput.current.selectionEnd\r\n\t\tconst emojiLength = emoji.native.length\r\n\t\tconst value = msgInput.current.value\r\n\t\tsetMessage(\r\n\t\t\tvalue.substring(0, startPosition) +\r\n\t\t\t\temoji.native +\r\n\t\t\t\tvalue.substring(endPosition, value.length)\r\n\t\t)\r\n\t\tmsgInput.current.focus()\r\n\t\tmsgInput.current.selectionEnd = endPosition + emojiLength\r\n\t}\r\n\t\r\n\tuseEffect(() => {\r\n\t\tconst msgBox = document.getElementById(\"msg-box\")\r\n\t\tif (\r\n\t\t\t!newMessage.seen &&\r\n\t\t\tnewMessage.chatId === chat.id &&\r\n\t\t\tmsgBox.scrollHeight !== msgBox.clientHeight\r\n\t\t) {\r\n\t\t\tif (msgBox.scrollTop > msgBox.scrollHeight * 0.3) {\r\n\t\t\t\tdispatch(incrementScroll())\r\n\t\t\t} else {\r\n\t\t\t\tsetShowNewMessageNotification(true)\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tsetShowNewMessageNotification(false)\r\n\t\t}\r\n\t}, [newMessage, dispatch])\r\n\r\n\tconst showNewMessage = () => {\r\n\t\tdispatch(incrementScroll())\r\n\t\tsetShowNewMessageNotification(false)\r\n}\r\n\t\r\n  return (\r\n\t\t<div id=\"input-container\">\r\n\t\t\t<div id=\"image-upload-container\">\r\n\t\t\t\t<div>\r\n\t\t\t\t\t{showNewMessageNotification ? (\r\n\t\t\t\t\t\t<div id=\"message-notification\" onClick={showNewMessage}>\r\n\t\t\t\t\t\t\t<FontAwesomeIcon icon=\"bell\" className=\"fa-icon\" />\r\n\t\t\t\t\t\t\t<p className=\"m-0\">new message</p>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t) : null}\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<div id=\"image-upload\">\r\n\t\t\t\t\t{image.name ? (\r\n\t\t\t\t\t\t<div id=\"image-details\">\r\n\t\t\t\t\t\t\t<p className=\"m-0\">{image.name}</p>\r\n\t\t\t\t\t\t\t<FontAwesomeIcon\r\n\t\t\t\t\t\t\t\tonClick={handleImageUpload}\r\n\t\t\t\t\t\t\t\ticon=\"upload\"\r\n\t\t\t\t\t\t\t\tclassName=\"fa-icon\"\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t<FontAwesomeIcon\r\n\t\t\t\t\t\t\t\tonClick={() => setImage(\"\")}\r\n\t\t\t\t\t\t\t\ticon=\"times\"\r\n\t\t\t\t\t\t\t\tclassName=\"fa-icon\"\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t) : null}\r\n\t\t\t\t\t<FontAwesomeIcon\r\n\t\t\t\t\t\tonClick={() => fileUpload.current.click()}\r\n\t\t\t\t\t\ticon={[\"far\", \"image\"]}\r\n\t\t\t\t\t\tclassName=\"fa-icon\"\r\n\t\t\t\t\t/>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<div id=\"message-input\">\r\n\t\t\t\t<textarea\r\n\t\t\t\t\tclassName=\"textArea\"\r\n\t\t\t\t\tstyle={{ marginBottom: 0 }}\r\n\t\t\t\t\tref={msgInput}\r\n\t\t\t\t\tvalue={message}\r\n\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\tplaceholder=\"Message...\"\r\n\t\t\t\t\tonChange={(e) => handleMessage(e)}\r\n\t\t\t\t\tonKeyDown={(e) => handleKeyDown(e, false)}\r\n\t\t\t\t/>\r\n\t\t\t\t<FontAwesomeIcon\r\n\t\t\t\t\tonClick={() => setShowEmojiPicker(!showEmojiPicker)}\r\n\t\t\t\t\ticon={[\"far\", \"smile\"]}\r\n\t\t\t\t\tclassName=\"fa-icon\"\r\n\t\t\t\t/>\r\n\t\t\t</div>\r\n\r\n\t\t\t<input\r\n\t\t\t\tid=\"chat-image\"\r\n\t\t\t\tref={fileUpload}\r\n\t\t\t\ttype=\"file\"\r\n\t\t\t\tonChange={(e) => setImage(e.target.files[0])}\r\n\t\t\t/>\r\n\r\n\t\t\t{showEmojiPicker ? (\r\n\t\t\t\t<Picker\r\n\t\t\t\t\ttitle=\"Pick your emoji...\"\r\n\t\t\t\t\temoji=\"point_up\"\r\n\t\t\t\t\tstyle={{ position: \"absolute\", bottom: \"20px\", right: \"20px\" }}\r\n\t\t\t\t\tonSelect={selectEmoji}\r\n\t\t\t\t/>\r\n\t\t\t) : null}\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default MessageInput","import React from 'react'\r\nimport { useSelector, useDispatch } from \"react-redux\"\r\n\r\n\r\nimport ChatHeader from '../ChatHeader/ChatHeader'\r\nimport MessageBox from \"../MessageBox/MessageBox\"\r\nimport MessageInput from \"../MessageInput/MessageInput\"\r\n\r\n\r\nimport './Messenger.scss'\r\n\r\n\r\nconst Messenger = () => {\r\n\tconst chat = useSelector((state) => state.chatReducer.currentChat)\r\n\r\n\tconst activeChat = () => {\r\n\t\treturn Object.keys(chat).length > 0\r\n\t}\r\n\t\r\n  return (\r\n\t\t<div className=\"messenger shadow-light\">\r\n\t\t\t{activeChat() ? (\r\n\t\t\t\t<div className=\"messenger__wrap\">\r\n\t\t\t\t\t<ChatHeader chat={chat} />\r\n\r\n\t\t\t\t\t<hr />\r\n\r\n\t\t\t\t\t<MessageBox chat={chat} />\r\n\t\t\t\t\t<MessageInput chat={chat} />\r\n\t\t\t\t</div>\r\n\t\t\t) : (\r\n\t\t\t\t<p>No active chat</p>\r\n\t\t\t)}\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default Messenger","import React from 'react'\r\nimport { useSelector } from \"react-redux\"\r\n\r\nimport \"./Friend.scss\"\r\n\r\n\r\nconst Friend = ({chat, click}) => {\r\n\r\n\tconst currentChat = useSelector((state) => state.chatReducer.currentChat)\r\n\r\n\tconst isChatOpened = () => {\r\n\t\treturn currentChat.id === chat.id ? \"opened\" : \"\"\r\n\t}\r\n\r\n\tconst lastMessage = () => {\r\n\t\tif (chat.Messages.length === 0) return \"\"\r\n\r\n\t\tconst message = chat.Messages[chat.Messages.length - 1]\r\n\t\treturn message.type === \"image\" ? \"image uploaded\" : message.message\r\n\t}\r\n\r\n  return (\r\n\t\t<div onClick={click} className={`friend-list ${isChatOpened()}`}>\r\n\t\t\t<div>\r\n\t\t\t\t<img\r\n\t\t\t\t\twidth=\"40\"\r\n\t\t\t\t\theight=\"40\"\r\n\t\t\t\t\talt=\"User avatar\"\r\n\t\t\t\t\tsrc={chat.Users[0].avatar}\r\n\t\t\t\t/>\r\n\t\t\t\t<div className=\"friend-info\">\r\n\t\t\t\t\t<h4 className=\"m-0\">\r\n\t\t\t\t\t\t{chat.Users[0].firstName} {chat.Users[0].lastName}\r\n\t\t\t\t\t</h4>\r\n\t\t\t\t\t<h5 className=\"m-0\">{lastMessage()}</h5>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<div className=\"friend-status\">\r\n\t\t\t\t<span\r\n\t\t\t\t\tclassName={`online-status ${\r\n\t\t\t\t\t\tchat.Users[0].status === \"online\" ? \"online\" : \"offline\"\r\n\t\t\t\t\t}`}\r\n\t\t\t\t></span>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default Friend","export default __webpack_public_path__ + \"static/media/chat.8b06f605.svg\";","import React, { useState } from \"react\"\r\nimport { useSelector, useDispatch } from \"react-redux\"\r\n\r\nimport Button from '../../../../components/Button'\r\nimport Modal from \"../../../../components/Modal\"\r\nimport Friend from \"../Friend/Friend\"\r\n\r\nimport { setCurrentChat } from \"../../../../store/actions/chat\"\r\nimport ChatService from \"../../../../services/chatService\"\r\nimport useDebounce from \"../../hooks/useDebounce\"\r\n\r\nimport icon from \"../../../../assets/images/chat.svg\"\r\nimport searchIcon from \"../../../../assets/images/searchIcon.svg\"\r\n\r\nimport './FriendList.scss'\r\n\r\n\r\nconst FriendList = () => {\r\n\r\n\tconst dispatch = useDispatch()\r\n\tconst chats = useSelector((state) => state.chatReducer.chats)\r\n\tconst socket = useSelector((state) => state.chatReducer.socket)\r\n\t\r\n\t\r\n\tconst [showAboutFriendsModal, setshowAboutFriendsModal] = useState(false)\r\n\tconst [showFriendsModal, setShowFriendsModal] = useState(false)\r\n\t\r\n\tconst [suggestions, setSuggestions] = useState([])\r\n\t\r\n\tconst openChat = (chat) => {\r\n\t\tdispatch(setCurrentChat(chat))\r\n\t}\r\n\t\r\n\tconst searchFriends = (e) => {\r\n\t\tChatService.searchUsers(e.target.value).then((res) =>\r\n\t\tsetSuggestions(res)\r\n\t\t)\r\n\t}\r\n\r\n\tconst debouncedSearch = useDebounce(searchFriends, 650)\r\n\r\n\tconst addNewFriend = (id) => {\r\n\t\tChatService.createChat(id)\r\n\t\t\t.then((chats) => {\r\n\t\t\t\tsocket.emit(\"add-friend\", chats)\r\n\t\t\t\tsetShowFriendsModal(false)\r\n\t\t\t})\r\n\t\t\t.catch((err) => console.log(err))\r\n\t}\r\n\t\r\n  return (\r\n\t\t<div className=\"friends shadow-light\">\r\n\t\t\t<div className=\"friends__title\">\r\n\t\t\t\t<h3 className=\"m-0\">Friends</h3>\r\n\t\t\t\t<Button\r\n\t\t\t\t\tcls=\"friends__title-button\"\r\n\t\t\t\t\tonClick={() => setshowAboutFriendsModal(true)}\r\n\t\t\t\t\ttext={\"ADD\"}\r\n\t\t\t\t></Button>\r\n\t\t\t</div>\r\n\r\n\t\t\t<hr />\r\n\r\n\t\t\t<div className=\"friends__box\">\r\n\t\t\t\t{chats.length > 0 ? (\r\n\t\t\t\t\tchats.map((chat) => {\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t<Friend click={() => openChat(chat)} chat={chat} key={chat.id} />\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t})\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<p id=\"no-chat\">No friends added</p>\r\n\t\t\t\t)}\r\n\t\t\t</div>\r\n\r\n\t\t\t{showAboutFriendsModal && (\r\n\t\t\t\t<Modal\r\n\t\t\t\t\tactive={showAboutFriendsModal}\r\n\t\t\t\t\tsetActive={setshowAboutFriendsModal}\r\n\t\t\t\t\tauth={false}\r\n\t\t\t\t>\r\n\t\t\t\t\t<div className=\"modal__bottom-image-about\">\r\n\t\t\t\t\t\t<img src={icon}></img>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<div className=\"modal__bottom-info\">\r\n\t\t\t\t\t\t<div className=\"modal__text\">\r\n\t\t\t\t\t\t\t<div className=\"modal__text-top\">\r\n\t\t\t\t\t\t\t\t<span>\r\n\t\t\t\t\t\t\t\t\tЧтобы начать диалог начните искать другого пользователя\r\n\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div className=\"modal__text-bottom\">\r\n\t\t\t\t\t\t\t\t<span>\r\n\t\t\t\t\t\t\t\t\tКогда вы найдете нужного пользователя, вы сможете делиться с\r\n\t\t\t\t\t\t\t\t\tним с сообщениями и медиа.\r\n\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"modal__bottom-children\">\r\n\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\ttext=\"Продолжить\"\r\n\t\t\t\t\t\t\t\ttype=\"primary\"\r\n\t\t\t\t\t\t\t\tcls=\"fullWidth\"\r\n\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\tsetshowAboutFriendsModal(false)\r\n\t\t\t\t\t\t\t\t\tsetShowFriendsModal(true)\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t></Button>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</Modal>\r\n\t\t\t)}\r\n\r\n\t\t\t{showFriendsModal && (\r\n\t\t\t\t<Modal\r\n\t\t\t\t\tactive={showFriendsModal}\r\n\t\t\t\t\tsetActive={setShowFriendsModal}\r\n\t\t\t\t\tauth={false}\r\n\t\t\t\t>\r\n\t\t\t\t\t<div className=\"modal__bottom-image-about--left\">\r\n\t\t\t\t\t\t<img src={searchIcon}></img>\r\n\t\t\t\t\t\t<span className=\"m-0\">Create new chat</span>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<div className=\"modal__bottom-info\">\r\n\t\t\t\t\t\t<div className=\"modal__text\">\r\n\t\t\t\t\t\t\t<div className=\"modal__text-top\">\r\n\t\t\t\t\t\t\t\t<span>Find friends by typing their name bellow:</span>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div className=\"modal__text-bottom\">\r\n\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\tonInput={(e) => debouncedSearch(e)}\r\n\t\t\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\t\t\tplaceholder=\"Search...\"\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"modal__bottom-children\">\r\n\t\t\t\t\t\t\t<div id=\"suggestions\">\r\n\t\t\t\t\t\t\t\t{suggestions.map((user) => {\r\n\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t<div key={user.id} className=\"suggestion\">\r\n\t\t\t\t\t\t\t\t\t\t\t<span className=\"m-0\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<img src={`${user.avatar}`} />\r\n\t\t\t\t\t\t\t\t\t\t\t\t{user.firstName} {user.lastName}\r\n\t\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\t\t\t\ttype=\"outlined\"\r\n\t\t\t\t\t\t\t\t\t\t\t\ttext=\"ADD\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tcls={\"search-btn\"}\r\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => addNewFriend(user.id)}\r\n\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</Modal>\r\n\t\t\t)}\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default FriendList","export default __webpack_public_path__ + \"static/media/updateProfile.bda42358.svg\";","import React, { Fragment, useState } from \"react\"\r\nimport { useSelector, useDispatch } from \"react-redux\"\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\"\r\nimport { logout } from \"../../../../store/actions/auth\"\r\n\r\nimport Modal from \"../../../../components/Modal\"\r\nimport Button from \"../../../../components/Button\"\r\nimport Input from \"../../../../components/Input/Input\"\r\n\r\nimport { updateProfile } from \"../../../../store/actions/auth\"\r\n\r\nimport { Validators } from \"../../../../utils/validators\"\r\nimport updateProfileSvg from \"../../../../assets/images/updateProfile.svg\"\r\nimport \"./Navbar.scss\"\r\n\r\n\r\nconst Navbar = () => {\r\n  const dispatch = useDispatch()\r\n  const user = useSelector((state) => state.auth.user)\r\n\r\n\r\n\tconst [showProfileOptions, setShowProfileOptions] = useState(false)\r\n\tconst [showProfileModal, setShowProfileModal] = useState(false)\r\n\r\n\r\n\t\tconst [formValid, setFormValid] = useState(true)\r\n\t  const [avatar, setAvatar] = useState(\"\")\r\n\r\n\t\tconst [stateControls, setControls] = useState({\r\n\t\t\tfirstName: {\r\n\t\t\t\tvalue: `${user.firstName}`,\r\n\t\t\t\ttype: \"text\",\r\n\t\t\t\ttypeField: \"input\",\r\n\t\t\t\terrorMessage: \"Введите имя\",\r\n\t\t\t\tlabel: \"Имя\",\r\n\t\t\t\tvalid: true,\r\n\t\t\t\ttouched: false,\r\n\t\t\t\tvalidation: {\r\n\t\t\t\t\trequired: Validators.required,\r\n\t\t\t\t\tminLength: Validators.minLength(1),\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tlastName: {\r\n\t\t\t\tvalue: `${user.lastName}`,\r\n\t\t\t\ttype: \"text\",\r\n\t\t\t\ttypeField: \"input\",\r\n\t\t\t\terrorMessage: \"Введите фамилию\",\r\n\t\t\t\tlabel: \"Фамилия\",\r\n\t\t\t\tvalid: true,\r\n\t\t\t\ttouched: false,\r\n\t\t\t\tvalidation: {\r\n\t\t\t\t\trequired: Validators.required,\r\n\t\t\t\t\tminLength: Validators.minLength(1),\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\temail: {\r\n\t\t\t\tvalue: `${user.email}`,\r\n\t\t\t\ttype: \"text\",\r\n\t\t\t\ttypeField: \"input\",\r\n\t\t\t\terrorMessage: \"Введите корректный email\",\r\n\t\t\t\tlabel: \"Введите почту\",\r\n\t\t\t\tvalid: true,\r\n\t\t\t\ttouched: false,\r\n\t\t\t\tvalidation: {\r\n\t\t\t\t\trequired: Validators.required,\r\n\t\t\t\t\temail: Validators.emailRequired,\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tpassword: {\r\n\t\t\t\tvalue: \"\",\r\n\t\t\t\ttype: \"password\",\r\n\t\t\t\ttypeField: \"input\",\r\n\t\t\t\tlabel: \"Пароль\",\r\n\t\t\t\terrorMessage: \"Введите пароль\",\r\n\t\t\t\tvalid: true,\r\n\t\t\t\ttouched: false,\r\n\t\t\t\tvalidation: {\r\n\t\t\t\t\trequired: Validators.required,\r\n\t\t\t\t\tminLength: Validators.minLength(4),\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tgender: {\r\n\t\t\t\tvalue: `${user.gender}`,\r\n\t\t\t\ttype: \"text\",\r\n\t\t\t\ttypeField: \"input\",\r\n\t\t\t\tlabel: \"Пол\",\r\n\t\t\t\terrorMessage: \"Заполните это поле\",\r\n\t\t\t\tvalid: true,\r\n\t\t\t\ttouched: false,\r\n\t\t\t\tvalidation: {\r\n\t\t\t\t\trequired: Validators.required,\r\n\t\t\t\t\tminLength: Validators.minLength(4),\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tinfoSelf: {\r\n\t\t\t\tvalue: `${user.infoSelf}`,\r\n\t\t\t\ttype: \"text\",\r\n\t\t\t\ttypeField: \"textarea\",\r\n\t\t\t\tlabel: \"Информация про себя\",\r\n\t\t\t\terrorMessage: \"Заполните это поле\",\r\n\t\t\t\tvalid: true,\r\n\t\t\t\ttouched: false,\r\n\t\t\t\tvalidation: {},\r\n\t\t\t},\r\n\t\t})\r\n\t\r\n\t\r\n\t\tconst submitForm = (e) => {\r\n\t\t\te.preventDefault()\r\n\r\n\t\t\tconst data = Object.keys(stateControls)\r\n\t\t\t\t.map((el) => {\r\n\t\t\t\t\tconst valueEl = stateControls[el].value\r\n\t\t\t\t\treturn { [el]: valueEl }\r\n\t\t\t\t})\r\n\t\t\t\t.reduce((prevVal, curr) => {\r\n\t\t\t\t\treturn (prevVal = { ...prevVal, ...curr })\r\n\t\t\t\t}, {})\r\n\t\t\t\r\n\t\t\tif (!data.password.length) {\r\n\t\t\t\tdelete data.password\r\n\t\t\t}\r\n\r\n\t\t\tconst form = { ...data, avatar }\r\n\r\n\t\t\tconst formData = new FormData()\r\n\r\n\t\t\tfor (const key in form) {\r\n\t\t\t\tformData.set(key, form[key])\r\n\t\t\t}\r\n\r\n\t\t\tdispatch(updateProfile(formData)).then(() => setShowProfileModal(false))\r\n\t\t}\r\n\t\r\n\t\tconst validateControl = (value, validation) => {\r\n\t\t\tif (!validation) {\r\n\t\t\t\treturn true\r\n\t\t\t}\r\n\r\n\t\t\tlet isValid = true\r\n\r\n\t\t\tObject.keys(validation).forEach((el) => {\r\n\t\t\t\tconst valid = validation[el]\r\n\t\t\t\tisValid = valid(value)\r\n\t\t\t})\r\n\r\n\t\t\treturn isValid\r\n\t\t}\r\n\r\n\tconst changeInputs = (e) => {\r\n\t\t\tconst { name, value } = e.target\r\n\r\n\t\t\tconst control = { ...stateControls[name] }\r\n\r\n\t\tcontrol.value = value\r\n\t\tcontrol.touched = true\r\n\t\tcontrol.valid = validateControl(value, control.validation)\r\n\r\n\t\tlet isFormValid = true\r\n\r\n\t\tObject.keys(stateControls).forEach((name) => {\r\n\t\t\tisFormValid = stateControls[name].valid && isFormValid\r\n\t\t})\r\n\r\n\t\tsetFormValid(isFormValid)\r\n\r\n\t\t\tsetControls((prevState) => ({\r\n\t\t\t\t...prevState,\r\n\t\t\t\t[name]: control,\r\n\t\t\t}))\r\n\t\t}\r\n\r\n\t\tconst renderInputs = () => {\r\n\t\t\treturn Object.keys(stateControls).map((controlName, index) => {\r\n\t\t\t\tconst control = stateControls[controlName]\r\n\t\t\t\tif (control.typeField === \"input\") {\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<Input\r\n\t\t\t\t\t\t\tkey={controlName + index}\r\n\t\t\t\t\t\t\ttype={control.type}\r\n\t\t\t\t\t\t\tvalue={control.value}\r\n\t\t\t\t\t\t\tname={controlName}\r\n\t\t\t\t\t\t\tvalid={control.valid}\r\n\t\t\t\t\t\t\ttouched={control.touched}\r\n\t\t\t\t\t\t\tlabel={control.label}\r\n\t\t\t\t\t\t\tshouldValidate={!!control.validation}\r\n\t\t\t\t\t\t\terrorMessage={control.errorMessage}\r\n\t\t\t\t\t\t\tonChange={changeInputs}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t)\r\n\t\t\t\t\t\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<textarea\r\n\t\t\t\t\t\t\tkey={controlName + index}\r\n\t\t\t\t\t\t\ttype={control.type}\r\n\t\t\t\t\t\t\tvalue={control.value}\r\n\t\t\t\t\t\t\tname={controlName}\r\n\t\t\t\t\t\t\tclassName=\"textArea\"\r\n\t\t\t\t\t\t\tonChange={changeInputs}\r\n\t\t\t\t\t\t></textarea>\r\n\t\t\t\t\t)\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t}\r\n\r\n\r\n\treturn (\r\n\t\t<Fragment>\r\n\t\t\t<div className=\"navbar card-shadow\">\r\n\t\t\t\t<h2>CHat</h2>\r\n\r\n\t\t\t\t{showProfileOptions && (\r\n\t\t\t\t\t<div\r\n\t\t\t\t\t\tid=\"wrapper-overflow\"\r\n\t\t\t\t\t\tonClick={() => setShowProfileOptions(false)}\r\n\t\t\t\t\t/>\r\n\t\t\t\t)}\r\n\r\n\t\t\t\t<div\r\n\t\t\t\t\tclassName=\"navbar__profile\"\r\n\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\tsetShowProfileOptions(!showProfileOptions)\r\n\t\t\t\t\t}}\r\n\t\t\t\t>\r\n\t\t\t\t\t<img width=\"40\" height=\"40\" src={user.avatar} alt=\"Avatar\" />\r\n\t\t\t\t\t<p>\r\n\t\t\t\t\t\t{user.firstName} {user.lastName}\r\n\t\t\t\t\t</p>\r\n\t\t\t\t\t<FontAwesomeIcon icon=\"caret-down\" className=\"fa-icon\" />\r\n\r\n\t\t\t\t\t{showProfileOptions && (\r\n\t\t\t\t\t\t<div className=\"options\">\r\n\t\t\t\t\t\t\t<p\r\n\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\tdispatch(logout())\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\tLogout\r\n\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t<p\r\n\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\tsetShowProfileModal(true)\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\tUpdate profile\r\n\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</div>\r\n\t\t\t\t{showProfileModal && (\r\n\t\t\t\t\t<Modal\r\n\t\t\t\t\t\tactive={showProfileModal}\r\n\t\t\t\t\t\tsetActive={setShowProfileModal}\r\n\t\t\t\t\t\tauth={false}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\tclassName=\"modal__bottom-image-about--left\"\r\n\t\t\t\t\t\t\tstyle={{ marginBottom: \"25px\" }}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<img src={updateProfileSvg}></img>\r\n\t\t\t\t\t\t\t<span className=\"m-0\">Update profile</span>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"modal__bottom-info\">\r\n\t\t\t\t\t\t\t<form className=\"auth__form\" style={{ width: \"400px\" }}>\r\n\t\t\t\t\t\t\t\t{renderInputs()}\r\n\t\t\t\t\t\t\t\t<div className=\"fileContainer\">\r\n\t\t\t\t\t\t\t\t\t<span id=\"spanFile\">Загрузить</span>\r\n\t\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\t\tid=\"inputFile\"\r\n\t\t\t\t\t\t\t\t\t\tonChange={(e) => setAvatar(e.target.files[0])}\r\n\t\t\t\t\t\t\t\t\t\ttype=\"file\"\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t<div className=\"modal__bottom-children\">\r\n\t\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\t\ttext=\"Обновить\"\r\n\t\t\t\t\t\t\t\t\t\ttype=\"primary\"\r\n\t\t\t\t\t\t\t\t\t\tcls=\"fullWidth\"\r\n\t\t\t\t\t\t\t\t\t\tonClick={submitForm}\r\n\t\t\t\t\t\t\t\t\t\tdisabled={!formValid}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</form>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</Modal>\r\n\t\t\t\t)}\r\n\t\t\t</div>\r\n\t\t</Fragment>\r\n\t)\r\n}\r\n\r\nexport default Navbar","import React from \"react\"\r\nimport { useSelector, useDispatch } from \"react-redux\"\r\nimport useSocket from \"./hooks/socketConnect\"\r\n\r\nimport Messenger from \"./components/Messenger/Messenger\"\r\nimport FriendList from \"./components/FriendList/FriendList\"\r\nimport Navbar from \"./components/Navbar/Navbar\"\r\n\r\n\r\nimport \"./Chat.scss\"\r\n\r\n\r\nexport const Chat = () => {\r\n\r\n\t\r\n    const dispatch = useDispatch()\r\n\t\tconst user = useSelector((state) => state.auth.user)\r\n\r\n\t\tuseSocket(user, dispatch)\r\n\r\n\treturn (\r\n\t\t<div id=\"chat-container\">\r\n\t\t\t<Navbar />\r\n\t\t\t<div id=\"chat-wrap\">\r\n\r\n\t\t\t\t<FriendList />\r\n\t\t\t\t\r\n\t\t\t\t<Messenger />\r\n\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React from \"react\"\r\nimport { Route, Redirect } from \"react-router-dom\"\r\nimport { useSelector } from \"react-redux\"\r\n\r\nconst ProtectedRoute = ({ component: Component, ...props }) => {\r\n\tconst isLoggedIn = useSelector((state) => state.auth.isLoggedIn)\r\n\r\n\treturn (\r\n\t\t<Route\r\n\t\t\t{...props}\r\n\t\t\trender={(props) =>\r\n\t\t\t\tisLoggedIn ? <Component {...props} /> : <Redirect to=\"/auth\" />\r\n\t\t\t}\r\n\t\t/>\r\n\t)\r\n}\r\n\r\nexport default ProtectedRoute\r\n","import './App.css';\nimport { Auth } from './pages/Authentication/Auth'\nimport {Chat} from './pages/Chat/Chat'\nimport ProtectedRoute from \"./components/Router/ProtectedRoute\"\n\nimport { BrowserRouter as Router, Route, Switch } from \"react-router-dom\"\n\n\nimport { library } from \"@fortawesome/fontawesome-svg-core\"\nimport { faSmile, faImage } from \"@fortawesome/free-regular-svg-icons\"\nimport {\n\tfaSpinner,\n\tfaEllipsisV,\n\tfaUserPlus,\n\tfaSignOutAlt,\n\tfaTrash,\n\tfaCaretDown,\n\tfaUpload,\n\tfaTimes,\n\tfaBell,\n} from \"@fortawesome/free-solid-svg-icons\"\nlibrary.add(\n\tfaSmile,\n\tfaImage,\n\tfaSpinner,\n\tfaEllipsisV,\n\tfaUserPlus,\n\tfaSignOutAlt,\n\tfaTrash,\n\tfaCaretDown,\n\tfaUpload,\n\tfaTimes,\n\tfaBell\n)\n\nfunction App() {\n  return (\n\t\t<Router>\n\t\t\t<div className=\"App\">\n\t\t\t\t<Switch>\n\t\t\t\t\t<Route path=\"/auth\" component={Auth} />\n\t\t\t\t\t<ProtectedRoute exact path=\"/\" component={Chat} />\n\n\t\t\t\t\t<Route render={() => <h1>404 page not found</h1>} />\n\t\t\t\t</Switch>\n\t\t\t</div>\n\t\t</Router>\n\t)\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\nimport { PersistGate } from \"redux-persist/integration/react\"\n\nimport { store, persistor } from \"./store/index\"\n\nimport { Provider } from \"react-redux\"\n\nReactDOM.render(\n\t<React.StrictMode>\n\t\t<Provider store={store}>\n\t\t\t<PersistGate persistor={persistor}>\n\t\t\t\t<App />\n\t\t\t</PersistGate>\n\t\t</Provider>\n\t</React.StrictMode>,\n\tdocument.getElementById(\"root\")\n)\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}